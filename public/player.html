<!doctype html>
<html><head><meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
<title>Player ¬∑ Time-Bank Auction</title>
<style>
  :root{ --bg:#0e0f12; --fg:#f2f3f7; --muted:#9aa0a6; --accent:#10b981; --danger:#ef4444; --disabled:#4b5563; }
  html,body{height:100%}
  body{margin:0;background:var(--bg);color:var(--fg);font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;min-height:100dvh;padding:calc(24px + env(safe-area-inset-top)) 0 32px}
  .wrap{max-width:560px;width:100%;padding:20px;display:flex;flex-direction:column;align-items:stretch;gap:24px}
  .joinHeader{position:relative;padding:26px 22px;border-radius:24px;background:linear-gradient(145deg,rgba(9,16,28,.88) 0%,rgba(14,25,44,.72) 65%,rgba(12,18,32,.68) 100%);border:1px solid rgba(54,88,128,.45);box-shadow:0 24px 60px rgba(4,8,16,.55);overflow:hidden;text-align:center;backdrop-filter:blur(18px)}
  .joinHeader::before{content:"";position:absolute;inset:-40% -30%;background:radial-gradient(circle at 50% 20%,rgba(82,246,255,.35) 0%,rgba(30,155,205,.08) 42%,transparent 70%);opacity:.8;pointer-events:none;transform:rotate(12deg)}
  .joinHeader::after{content:"";position:absolute;inset:1px;border-radius:22px;border:1px solid rgba(151,240,255,.14);opacity:.75;pointer-events:none}
  .joinHeaderInner{position:relative;z-index:1;display:flex;flex-direction:column;align-items:center;gap:12px}
  .headerBadge{text-transform:uppercase;letter-spacing:.4em;font-size:11px;font-weight:700;color:#5de4ff;background:rgba(12,41,57,.65);border:1px solid rgba(86,189,214,.5);border-radius:999px;padding:6px 18px;box-shadow:0 0 18px rgba(45,179,215,.35)}
  .gameTitle{margin:0;font-size:clamp(32px,8vw,46px);font-weight:900;letter-spacing:.32em;text-transform:uppercase;background:linear-gradient(120deg,#61f2ff 0%,#33c7ff 35%,#0e234a 90%);-webkit-background-clip:text;color:transparent;text-shadow:0 4px 26px rgba(20,172,215,.45);line-height:1.15}
  .gameSubtitle{font-size:clamp(13px,3.6vw,16px);letter-spacing:.24em;text-transform:uppercase;color:#9bd7ff;text-shadow:0 0 18px rgba(95,204,255,.25)}
  .joinHeaderDivider{width:84px;height:2px;background:linear-gradient(90deg,transparent 0%,rgba(99,219,255,.85) 50%,transparent 100%);opacity:.75}
  .joinHeaderMeta{display:flex;gap:12px;flex-wrap:wrap;justify-content:center;font-size:12px;letter-spacing:.18em;text-transform:uppercase;color:#6ba5d6}
  .joinHeaderMeta span{padding:6px 12px;border-radius:999px;background:rgba(19,36,54,.6);border:1px solid rgba(69,136,177,.4);box-shadow:0 0 24px rgba(48,149,198,.25)}
  .joinRules{background:linear-gradient(145deg,rgba(9,15,27,.88) 0%,rgba(10,20,36,.74) 60%,rgba(9,16,28,.7) 100%);border:1px solid rgba(49,80,120,.5);border-radius:22px;padding:22px 24px;box-shadow:0 18px 54px rgba(0,0,0,.55);display:grid;gap:18px;backdrop-filter:blur(16px)}
  .joinRulesHeader{display:flex;align-items:center;justify-content:space-between;gap:16px;flex-wrap:wrap}
  .joinRulesTitle{margin:0;font-size:18px;font-weight:800;letter-spacing:.22em;text-transform:uppercase;color:#9ae9ff;text-shadow:0 0 24px rgba(94,223,255,.35)}
  .joinRulesAccent{flex:1;height:1px;min-width:120px;background:linear-gradient(90deg,rgba(97,242,255,.05) 0%,rgba(97,242,255,.5) 45%,rgba(14,35,74,.8) 100%);box-shadow:0 0 18px rgba(40,174,219,.25)}
  .rulesList{margin:0;padding-left:18px;display:grid;gap:10px;color:#c3d9f5;font-size:14px;line-height:1.55}
  .rulesList li{background:rgba(15,26,44,.58);border:1px solid rgba(60,112,162,.4);border-radius:14px;padding:12px 16px;list-style:none;position:relative}
  .rulesList li::before{content:"";position:absolute;left:10px;top:50%;width:6px;height:6px;border-radius:999px;background:#5cf0ff;box-shadow:0 0 14px rgba(95,240,255,.7);transform:translate(-50%,-50%)}
  .rulesList strong{color:#aff4ff;font-weight:700}
  @media (max-width:540px){
    .wrap{padding:16px;gap:20px}
    .joinHeader{padding:22px 18px;border-radius:20px}
    .joinHeader::after{border-radius:18px}
    .gameTitle{letter-spacing:.26em}
    .joinHeaderDivider{width:72px}
    .joinRules{padding:20px 18px}
    .joinRulesTitle{font-size:16px;letter-spacing:.18em}
  }
  .card{background:#12151b;border:1px solid #1f2632;border-radius:20px;box-shadow:0 10px 30px rgba(0,0,0,.35)}
  .pad{padding:18px}
  h1{font-size:18px;margin:0 0 8px}
  .muted{color:#9aa0a6;font-size:13px}
  .row{display:flex;gap:10px;align-items:center}
  input,button{font:inherit}
  input[type=text]{width:100%;padding:12px 14px;border-radius:12px;border:1px solid #2a3444;background:#0b0e13;color:var(--fg)}
  .btn{padding:12px 16px;border-radius:14px;border:1px solid #334155;background:#0b0e13;color:var(--fg)}
  .btn.primary{background:var(--accent);color:#00160e;border-color:#08946d}
  .text-link{background:none;border:0;padding:0;color:#93c5fd;text-decoration:underline;font:inherit;font-size:13px;cursor:pointer}
  .center{display:flex;align-items:center;justify-content:center}
  .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace}

  /* Phase Bar */
  .phaseBar{display:flex;align-items:center;gap:10px;margin:8px 0 6px}
  .phaseBadge{font-weight:700;font-size:12px;padding:4px 8px;border-radius:999px;border:1px solid transparent}
  .phaseCopy{color:#9aa0a6;font-size:13px}
  .ph-idle{background:#0f172a;color:#e2e8f0;border-color:#1f2937}
  .ph-arming{background:#f59e0b20;color:#fbbf24;border-color:#f59e0b55}
  .ph-countdown{background:#fb923c20;color:#fdba74;border-color:#fb923c55}
  .ph-active{background:#10b98120;color:#34d399;border-color:#10b98155}
  .ph-ended{background:#6d28d920;color:#c4b5fd;border-color:#6d28d955}
  .ph-exhausted{background:#4b556320;color:#cbd5e1;border-color:#4b556355}

  /* Round timer */
  .roundTimerPanel{position:relative;margin:12px 0 10px;padding:18px 22px;border-radius:24px;background:radial-gradient(circle at 12% 12%,rgba(59,130,246,.22) 0%,rgba(12,18,32,.35) 50%,rgba(10,13,22,.92) 100%);border:1px solid rgba(63,120,224,.45);box-shadow:0 18px 48px rgba(8,14,28,.55);display:grid;gap:10px;overflow:hidden;transition:border-color .28s ease,box-shadow .3s ease,transform .3s ease;
    --timer-accent:#38bdf8;--timer-glow:rgba(56,189,248,.38);--timer-bg:rgba(15,23,42,.72);--timer-label:#cbd5f5;--timer-value:#f8fafc;
  }
  .roundTimerPanel::before{content:"";position:absolute;inset:-40% -30%;background:radial-gradient(circle at 24% 26%,var(--timer-glow) 0%,transparent 60%);opacity:.85;filter:blur(0);pointer-events:none;transition:opacity .28s ease,transform .6s ease;
  }
  .roundTimerPanel::after{content:"";position:absolute;inset:1px;border-radius:22px;border:1px solid rgba(148,197,255,.24);opacity:.8;pointer-events:none;mix-blend-mode:screen}
  .roundTimerLabel{position:relative;z-index:1;font-size:12px;letter-spacing:.26em;text-transform:uppercase;color:var(--timer-label);font-weight:700;display:flex;align-items:center;gap:10px}
  .roundTimerLabel::after{content:"";flex:1;height:1px;background:linear-gradient(90deg,rgba(148,197,255,.18) 0%,rgba(148,197,255,.5) 60%,transparent 100%);border-radius:99px;opacity:.8}
  .roundTimerValue{position:relative;z-index:1;font-size:clamp(32px,10vw,58px);font-weight:900;letter-spacing:.08em;color:var(--timer-value);text-shadow:0 10px 28px rgba(14,23,42,.75),0 0 18px var(--timer-glow);transition:color .28s ease,text-shadow .28s ease}
  .roundTimerPanel.is-idle{--timer-accent:#38bdf8;--timer-glow:rgba(56,189,248,.35);--timer-label:#cbd5f5;--timer-bg:rgba(15,23,42,.72)}
  .roundTimerPanel.is-arming{--timer-accent:#fbbf24;--timer-glow:rgba(251,191,36,.32);--timer-label:#fcd34d;--timer-value:#fef3c7;transform:translateY(0);box-shadow:0 20px 54px rgba(92,64,12,.45)}
  .roundTimerPanel.is-countdown{--timer-accent:#fb923c;--timer-glow:rgba(251,146,60,.38);--timer-label:#fdba74;--timer-value:#fff7ed;animation:roundTimerPulse 1.4s ease-in-out infinite}
  .roundTimerPanel.is-active{--timer-accent:#34d399;--timer-glow:rgba(52,211,153,.38);--timer-label:#bbf7d0;--timer-value:#ecfdf5;animation:roundTimerPulse 1.1s ease-in-out infinite;box-shadow:0 24px 60px rgba(12,56,40,.55)}
  .roundTimerPanel.is-ended{--timer-accent:#a855f7;--timer-glow:rgba(168,85,247,.34);--timer-label:#ddd6fe;--timer-value:#ede9fe;box-shadow:0 20px 48px rgba(67,26,120,.45)}
  .roundTimerPanel.is-exhausted{--timer-accent:#94a3b8;--timer-glow:rgba(148,163,184,.28);--timer-label:#cbd5f5;--timer-value:#e2e8f0;opacity:.9;box-shadow:0 18px 40px rgba(11,13,18,.4)}
  .roundTimerPanel.is-idle::before,.roundTimerPanel.is-ended::before,.roundTimerPanel.is-exhausted::before{transform:translate3d(0,0,0)}
  .roundTimerPanel.is-countdown::before{opacity:.95;transform:translate3d(4%,4%,0)}
  .roundTimerPanel.is-active::before{opacity:1;animation:roundTimerSweep 3s linear infinite}
  .roundTimerPanel.is-arming::before{opacity:.92;transform:translate3d(-6%,-4%,0)}
  .roundTimerPanel.is-idle,.roundTimerPanel.is-ended,.roundTimerPanel.is-exhausted{animation:none}
  .roundTimerPanel .roundTimerValue::after{content:"";position:absolute;inset:auto 0 -8px;height:2px;background:linear-gradient(90deg,transparent 0%,var(--timer-accent) 45%,transparent 100%);opacity:.55;border-radius:999px;pointer-events:none}
  @keyframes roundTimerPulse{0%{transform:translateY(0) scale(1);}50%{transform:translateY(-2px) scale(1.01);}100%{transform:translateY(0) scale(1);}}
  @keyframes roundTimerSweep{0%{transform:translate(-10%, -10%) rotate(0deg);}50%{transform:translate(6%,6%) rotate(1turn);}100%{transform:translate(-10%, -10%) rotate(2turn);}}
  @media (max-width:540px){
    .roundTimerPanel{padding:16px 18px;border-radius:20px;margin:12px 0 8px}
    .roundTimerLabel{font-size:11px;letter-spacing:.2em}
    .roundTimerValue{font-size:clamp(28px,16vw,48px)}
  }
  @media (max-width:400px){
    .roundTimerPanel{padding:14px 16px}
    .roundTimerLabel{letter-spacing:.16em}
    .roundTimerValue{font-size:clamp(26px,18vw,44px)}
  }

  /* Circular hold button */
  .hold.bonus{ background:#231a00; border-color:#d4af37; box-shadow:0 0 0 2px rgba(212,175,55,.25) inset; }
  .hold{ width:min(72vw, 420px); height:min(72vw, 420px); max-width:420px; max-height:420px; min-width:220px; min-height:220px; border-radius:9999px; margin:18px auto 6px; display:flex; align-items:center; justify-content:center; user-select:none; -webkit-user-select:none; touch-action:manipulation; border:6px solid transparent; transition:transform .08s ease, background .15s ease, border-color .15s ease, opacity .15s ease; }
  .hold.idle{ background:#1a0f12; border-color:var(--danger); }
  .hold.pressed{ background:#0f1a14; border-color:var(--accent); }
  .hold.disabled{ background:#101318; border-color:var(--disabled); opacity:.6; }
  .hold:active{ transform:scale(.985); }
  .hold.no-hold{ background:#1f0b12; border-color:#f87171; box-shadow:0 0 0 4px rgba(248,113,113,.25); animation:noHoldPulse 1.4s ease-in-out infinite; }
  .hold.no-hold .holdText{ color:#fee2e2; }
  .hold.no-hold .holdSub{ color:#fecaca; }
  .holdText{ font-size:22px; opacity:.92; text-align:center; }
  .holdSub{ color:#9aa0a6; font-size:12px; margin-top:6px; text-align:center; }
  .round-result{ margin-top:10px; font-size:14px; color:var(--muted); font-weight:500; transition:color .2s ease, text-shadow .35s ease; }
  .round-result.round-result--alert{ color:#fecaca; font-weight:700; text-shadow:0 0 12px rgba(248,113,113,.45); }

  .gameMeta{display:grid;gap:10px;margin:12px 0 4px;grid-template-columns:repeat(2,minmax(0,1fr))}
  @media (max-width:340px){ .gameMeta{grid-template-columns:1fr;} }
  .metaItem{background:#11141c;border:1px solid #1f2632;border-radius:14px;padding:12px 14px}
  .metaLabel{margin:0 0 6px;font-size:11px;letter-spacing:.12em;text-transform:uppercase;color:#94a3b8}
  .metaValue{font-weight:700;font-size:15px}
  .metaSub{color:#9aa0a6;font-size:12px;margin-top:4px}

  /* Countdown overlay */
  #countdownOverlay{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,.35); }
  #countdownDigit{ font-size:72px; font-weight:800; color:#f8fafc; text-shadow:0 6px 24px rgba(0,0,0,.45); }

  .toast{position:fixed;bottom:16px;left:50%;transform:translateX(-50%);background:#0b0e13;border:1px solid #2a3444;color:#f8fafc;padding:12px 14px;border-radius:12px}

  /* Public scoreboard */
  #publicScoreCard{ display:none; margin-top:14px }
  #publicScoreCard table{ width:100%; border-collapse:collapse }
  #publicScoreCard th,#publicScoreCard td{ border-bottom:1px solid #1f2632; padding:6px 8px; text-align:left }
  #publicScoreCard .rank{ width:1%; white-space:nowrap; }

  /* Final modal */
  #finalModal{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,.6); padding:20px; }
  #finalCard{ max-width:760px; width:100%; background:#0b0e13; border:1px solid #2a3444; border-radius:18px; box-shadow:0 12px 32px rgba(0,0,0,.45); }
  #finalCard .pad{ padding:16px 18px; }
  #finalCard h2{ margin:0 0 6px; }
  #finalTable{ max-height:60vh; overflow:auto; }
  #finalTable table{ width:100%; border-collapse:collapse }
  #finalTable th,#finalTable td{ border-bottom:1px solid #1f2632; padding:6px 8px; text-align:left }

  /* P210 layout guard */
  :root { --hud-h: 56px; }
  header,.top,.top-bar,.hud,.status-bar{ position:sticky; top:env(safe-area-inset-top); z-index:100; backdrop-filter:blur(6px); background:rgba(10,15,26,.6) }
  .public-scoreboard,#publicScoreboard,.scoreboard,[data-role="public-scoreboard"]{ max-height:calc(100dvh - var(--hud-h) - 16px - env(safe-area-inset-top)); overflow-y:auto; overscroll-behavior:contain; -webkit-overflow-scrolling:touch }

  /* P213 splash */
  :root{ --splash-bg: linear-gradient(180deg, #0b1223 0%, #0a0f1a 100%); }
  .splash{ position:relative; min-height:60dvh; display:flex; align-items:center; justify-content:center; text-align:center; padding:calc(16px + env(safe-area-inset-top)) 16px 12px; }
  .splash-bg{ position:absolute; inset:0; background:var(--splash-bg); }
  .splash-inner{ position:relative; z-index:1; max-width:720px; color:#e6f0ff }
  .splash-title{ margin:.6rem 0 .6rem; font-size:clamp(28px, 6vw, 48px); font-weight:800; letter-spacing:.2px }
  .splash-cta{ display:flex; gap:10px; justify-content:center; align-items:center; flex-wrap:wrap }
  .btn.primary{ background:#124c3a; color:#001; border:0; padding:.7rem 1rem; border-radius:12px; font-weight:800; cursor:pointer }
  .link{ color:#93c5fd; text-decoration:underline }

  /* Round recap panel */
  #roundRecapPanel{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;padding:28px 18px;z-index:220;pointer-events:none;visibility:hidden;opacity:0;transition:opacity .32s ease,visibility .32s ease;background:radial-gradient(120% 120% at 50% 10%,rgba(64,144,255,.35) 0%,rgba(12,26,54,.78) 45%,rgba(6,12,24,.92) 100%);backdrop-filter:blur(14px);-webkit-backdrop-filter:blur(14px);overflow:hidden}
  #roundRecapPanel::before{content:"";position:absolute;inset:0;background:radial-gradient(140% 140% at 50% 0%,rgba(0,140,255,.22) 0%,rgba(3,9,20,.85) 60%,rgba(3,8,18,.96) 100%);mix-blend-mode:screen;opacity:.65;pointer-events:none;z-index:0}
  #roundRecapPanel.show{visibility:visible;pointer-events:auto;opacity:1}
  #roundRecapPanel.closing{pointer-events:none;opacity:0}
  #roundRecapPanel .round-recap{position:relative;z-index:1;max-width:560px;width:min(100%,560px);background:linear-gradient(160deg,rgba(8,18,36,.94) 0%,rgba(6,14,30,.92) 55%,rgba(4,10,22,.96) 100%);border-radius:28px;border:1px solid rgba(74,202,255,.45);box-shadow:0 42px 120px rgba(6,18,40,.85),0 0 32px rgba(30,200,255,.4);overflow:hidden;transform:translate3d(0,32px,0) scale(.97);opacity:0;transition:transform .34s cubic-bezier(.22,1,.36,1),opacity .28s ease;pointer-events:auto;color:#e8f6ff}
  #roundRecapPanel .round-recap::before{content:"";position:absolute;inset:1px;border-radius:26px;border:1px solid rgba(94,247,255,.22);mix-blend-mode:screen;pointer-events:none}
  #roundRecapPanel .round-recap::after{content:"";position:absolute;inset:-20% -25% auto -25%;height:280px;background:radial-gradient(60% 60% at 50% 20%,rgba(66,225,255,.32) 0%,rgba(28,130,255,.12) 48%,transparent 70%);opacity:.8;pointer-events:none;transform:translateY(-16px)}
  #roundRecapPanel.show .round-recap{transform:translate3d(0,0,0) scale(1);opacity:1}
  #roundRecapPanel.closing .round-recap{transform:translate3d(0,32px,0) scale(.96);opacity:0}
  #roundRecapPanel.alert .round-recap{border-color:rgba(255,140,76,.6);box-shadow:0 42px 120px rgba(20,6,2,.8),0 0 32px rgba(255,128,72,.42)}
  #roundRecapPanel.alert .round-recap::before{border-color:rgba(255,189,143,.35)}
  #roundRecapPanel.alert .round-recap__eyebrow{color:#ffb38a;text-shadow:0 0 16px rgba(255,136,68,.55)}
  #roundRecapPanel.alert .round-recap__summary{color:#ffe8dd}
  .round-recap__header{position:relative;padding:28px 32px 22px;display:flex;align-items:flex-start;justify-content:space-between;gap:20px;background:linear-gradient(150deg,rgba(10,46,77,.92) 0%,rgba(7,22,42,.94) 55%,rgba(5,16,32,.98) 100%);box-shadow:inset 0 -1px 0 rgba(73,194,255,.35)}
  .round-recap__header::after{content:"";position:absolute;inset:auto 32px 12px 32px;height:1px;background:linear-gradient(90deg,rgba(73,194,255,.25) 0%,rgba(255,141,70,.4) 52%,rgba(73,194,255,.25) 100%);opacity:.7}
  .round-recap__header-text{display:grid;gap:10px}
  .round-recap__eyebrow{font-size:12px;letter-spacing:.46em;text-transform:uppercase;color:#5ef8ff;text-shadow:0 0 16px rgba(80,230,255,.45);font-weight:800}
  .round-recap__title{margin:0;font-size:clamp(26px,6vw,36px);font-weight:900;letter-spacing:.04em;text-transform:uppercase;color:#f8fbff;text-shadow:0 14px 38px rgba(4,12,26,.75)}
  .round-recap__subtitle{margin:0;font-size:15px;color:#9ddcff;text-shadow:0 0 20px rgba(104,206,255,.4)}
  .round-recap__subtitle:empty{display:none}
  .round-recap__subtitle strong{color:#fef2c0}
  .round-recap__close{margin:2px 0 0 auto;width:40px;height:40px;border-radius:14px;border:1px solid rgba(94,247,255,.28);background:linear-gradient(140deg,rgba(6,24,44,.9) 0%,rgba(12,48,84,.65) 80%);color:#87eaff;display:flex;align-items:center;justify-content:center;font-size:22px;cursor:pointer;transition:transform .18s ease,box-shadow .18s ease,border-color .18s ease,color .18s ease}
  .round-recap__close:hover,.round-recap__close:focus-visible{transform:translateY(-1px);box-shadow:0 0 18px rgba(94,247,255,.45);border-color:rgba(134,232,255,.65);color:#c8f6ff;outline:none}
  .round-recap__body{padding:24px 32px 18px;display:grid;gap:20px;position:relative}
  .round-recap__body::before{content:"";position:absolute;inset:auto 20% 0 20%;height:1px;background:linear-gradient(90deg,rgba(73,194,255,.18) 0%,rgba(255,141,70,.4) 50%,rgba(73,194,255,.18) 100%);opacity:.6;pointer-events:none}
  .round-recap__summary{font-size:18px;line-height:1.55;font-weight:600;color:#d8f3ff;text-shadow:0 0 22px rgba(76,220,255,.35)}
  .round-recap__stats{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(180px,1fr))}
  .round-recap__stat{position:relative;padding:16px 18px;border-radius:18px;background:linear-gradient(155deg,rgba(10,32,56,.88) 0%,rgba(5,15,32,.92) 100%);border:1px solid rgba(73,194,255,.35);box-shadow:0 0 0 1px rgba(36,110,168,.35) inset,0 20px 40px rgba(3,12,26,.65);overflow:hidden}
  .round-recap__stat::before{content:"";position:absolute;inset:-25% -35% 50% -35%;background:radial-gradient(60% 60% at 50% 30%,rgba(80,236,255,.22) 0%,transparent 70%);opacity:.7;pointer-events:none}
  .round-recap__label{font-size:11px;letter-spacing:.36em;text-transform:uppercase;color:#76c5ff;margin-bottom:8px;display:block}
  .round-recap__value{font-size:22px;font-weight:800;color:#f9fcff;text-transform:uppercase;letter-spacing:.06em;text-shadow:0 12px 28px rgba(2,8,18,.75)}
  .round-recap__note{font-size:13px;color:#9cc4ff;margin-top:8px}
  .round-recap__footer{padding:0 32px 28px;display:flex;justify-content:flex-end;align-items:center;flex-wrap:wrap;gap:14px}
  .round-recap__footer-note{color:#94c2ff;font-size:13px;text-transform:uppercase;letter-spacing:.24em;margin-right:auto;min-height:20px}
  .round-recap__dismiss{padding:12px 22px;border-radius:999px;border:1px solid rgba(255,140,76,.55);background:linear-gradient(135deg,rgba(255,120,54,.95) 0%,rgba(255,162,102,.85) 45%,rgba(255,205,150,.75) 100%);color:#1b0c06;font-size:13px;font-weight:800;text-transform:uppercase;letter-spacing:.22em;cursor:pointer;transition:transform .18s ease,box-shadow .2s ease,filter .2s ease}
  .round-recap__dismiss:hover,.round-recap__dismiss:focus-visible{transform:translateY(-1px);box-shadow:0 12px 24px rgba(255,136,68,.45);filter:saturate(1.2);outline:none}
  .round-recap__dismiss:active{transform:translateY(1px)}
  @media (max-width:520px){
    #roundRecapPanel{padding:18px}
    .round-recap__header{padding:24px 22px 18px}
    .round-recap__header::after{inset:auto 22px 10px 22px}
    .round-recap__body{padding:20px 22px 16px}
    .round-recap__body::before{inset:auto 15% 0 15%}
    .round-recap__stats{grid-template-columns:1fr 1fr}
    .round-recap__footer{padding:0 22px 24px}
  }
  @media (max-width:420px){
    .round-recap__stats{grid-template-columns:1fr}
    .round-recap__dismiss{width:100%;text-align:center}
  }

  #nextReadyPanel{display:none;margin-top:12px;padding:12px;border:1px solid #1f2632;border-radius:14px;background:#11141c}
  #nextReadyPanel .title{font-weight:700;font-size:14px;margin-bottom:4px}
  #nextReadyStatus{color:#9aa0a6;font-size:13px}
  #nextReadyCountdownPlayer{display:none;margin-top:8px;padding:4px 10px;border-radius:999px;background:#1f2632;color:#e5e7eb;font-size:12px}
  #toggleReadyBtn.ready{background:#1f2632;color:#e5e7eb;border-color:#1f2632}


  /* Heartbeat pulse */
  @keyframes hbBeat { 0%{transform:scale(1)} 40%{transform:scale(1.03)} 100%{transform:scale(1)} }
  .hold.hb-beat { animation: hbBeat 180ms ease-out; box-shadow: 0 0 0 0 rgba(16,185,129,.35); }
  @keyframes noHoldPulse { 0%{box-shadow:0 0 0 4px rgba(248,113,113,.28);} 50%{box-shadow:0 0 0 12px rgba(248,113,113,.12);} 100%{box-shadow:0 0 0 4px rgba(248,113,113,.28);} }

</style>
</head>
<body>

<div class="wrap">
    <div class="joinHeader" id="joinHeader">
      <div class="joinHeaderInner">
        <span class="headerBadge">Player Deployment</span>
        <div class="gameTitle">Time Auction</div>
        <div class="gameSubtitle">Press ¬∑ Hold ¬∑ Outlast the field</div>
        <div class="joinHeaderDivider"></div>
        <div class="joinHeaderMeta">
          <span>Real-time bidding</span>
          <span>Shared time banks</span>
          <span>Earn victory tokens</span>
        </div>
      </div>
    </div>

    <div class="card pad" id="joinCard">
      <h1>Join or Resume</h1>
      <div class="muted">Enter a name to join for the first time, or resume with your saved PIN.</div>
      <div id="savedSession" class="muted" style="display:none;margin-top:8px"></div>
      <div class="row" style="margin-top:10px">
        <input id="name" type="text" maxlength="24" placeholder="Your name"/>
        <button id="join" class="btn primary">Join</button>
      </div>
      <div id="nameHelper" class="muted" style="margin-top:6px">We‚Äôll generate your PIN right after launch.</div>
      <button id="showResume" class="text-link" type="button" style="margin-top:8px;display:none">Have a PIN?</button>
      <div id="resumeGroup" style="display:none;margin-top:10px">
        <div class="row">
          <input id="pin" type="text" maxlength="6" placeholder="Your PIN (4‚Äì5 digits)"/>
          <button id="reconnect" class="btn">Resume</button>
        </div>
      </div>
      <div id="statusMsg" class="muted" style="margin-top:12px;display:none"></div>
    </div>

    <section class="joinRules" id="joinRulesPanel" aria-labelledby="joinRulesTitle">
      <div class="joinRulesHeader">
        <h2 class="joinRulesTitle" id="joinRulesTitle">How to Play</h2>
        <div class="joinRulesAccent"></div>
      </div>
      <ul class="rulesList">
        <li><strong>Press & Hold:</strong> Stay on the bid button to spend from your personal time bank and stay in the round.</li>
        <li><strong>Release Strategically:</strong> Let go when the pressure is too high‚Äîreleasing early saves time for later rounds.</li>
        <li><strong>Win Tokens:</strong> The last player holding each round earns a victory token; rack them up to claim the final crown.</li>
      </ul>
    </section>

    <div class="card pad" id="gameCard" style="display:none">
      <div class="row" style="justify-content:space-between">
        <div>
          <div class="muted">Player</div>
          <div id="playerName" style="font-weight:700"></div>
          <div class="muted" style="font-size:12px">Your PIN: <span id="myPin" class="mono"></span></div>
        </div>
        <div style="text-align:right">
          <div class="muted">Victory tokens</div>
          <div id="tokenCount" style="font-weight:700;text-align:right">üèÜ 0</div>
        </div>
      </div>

      <!-- Phase Bar -->
      <div id="phaseBar" class="phaseBar" role="status" aria-live="polite">
        <span id="phaseBadge" class="phaseBadge ph-idle">Idle</span>
        <span id="phaseCopy" class="phaseCopy">Waiting for host‚Ä¶</span>
      </div>

      <div class="gameMeta" id="gameMeta" aria-live="polite">
        <div class="metaItem">
          <div class="metaLabel">Match progress</div>
          <div id="roundStatus" class="metaValue">Waiting for host</div>
          <div id="roundStatusDetail" class="metaSub" style="display:none"></div>
        </div>
        <div class="metaItem">
          <div class="metaLabel">Starting time bank</div>
          <div id="timeBankValue" class="metaValue">‚Äî</div>
          <div id="timeBankDetail" class="metaSub" style="display:none">Per player at start</div>
        </div>
      </div>

      <!-- Round timer (Active phase) -->
      <div id="roundTimerPanel" class="roundTimerPanel is-idle" role="timer" aria-live="polite">
        <div class="roundTimerLabel">Round Timer</div>
        <div class="roundTimerValue mono" id="roundTimer">00:00.000</div>
      </div>

      <div id="holdArea" class="hold idle" role="button" aria-pressed="false" aria-label="Press and hold">
        <div><div id="holdText" class="holdText">Press & Hold</div><div id="holdSub" class="holdSub">Release = out (this round)</div></div>
      </div>

      <div id="exhaustedMsg" class="toast" style="display:none">Your time bank is exhausted. You are spectating.</div>
      <div id="roundResult" class="muted round-result"></div>

      <div id="nextReadyPanel">
        <div class="title">Next round</div>
        <div id="nextReadyStatus">Ready 0 / 0</div>
        <div class="row" style="gap:10px;margin-top:8px;flex-wrap:wrap">
          <button id="toggleReadyBtn" class="btn primary">I'm ready</button>
          <span id="nextReadyCountdownPlayer"></span>
        </div>
      </div>

      <div id="publicScoreCard" class="card pad">
        <h3>Scoreboard</h3>
        <div id="publicScoreTable"></div>
      </div>
    </div>
  </div>

  <div id="countdownOverlay" class="center"><div id="countdownDigit">5</div></div>

  <!-- Final Modal -->
  <div id="finalModal" class="center">
    <div id="finalCard" class="card">
      <div class="pad">
        <h2>Final Results</h2>
        <div id="finalChampion" class="muted">Champion: ‚Äî</div>
      </div>
      <div id="finalTable" class="pad">
        <div id="finalTableInner"></div>
      </div>
      <div class="pad" style="text-align:right">
        <button id="closeFinal" class="btn">Close</button>
      </div>
    </div>
  </div>

  <div id="roundRecapPanel" aria-live="polite" aria-atomic="false">
    <div class="round-recap" role="dialog" aria-modal="true" aria-labelledby="roundRecapLabel roundRecapTitle" aria-describedby="roundRecapSummary">
      <div class="round-recap__header">
        <div class="round-recap__header-text">
          <div id="roundRecapLabel" class="round-recap__eyebrow">Round Winner</div>
          <div id="roundRecapTitle" class="round-recap__title">Round recap</div>
          <p id="roundRecapSubtitle" class="round-recap__subtitle"></p>
        </div>
        <button id="roundRecapClose" class="round-recap__close" type="button" aria-label="Dismiss round winner recap"><span aria-hidden="true">√ó</span></button>
      </div>
      <div id="roundRecapLive" class="round-recap__body" aria-live="polite" aria-atomic="false">
        <div id="roundRecapSummary" class="round-recap__summary"></div>
        <div class="round-recap__stats">
          <div class="round-recap__stat">
            <div class="round-recap__label">Leader</div>
            <div id="roundRecapLeader" class="round-recap__value">‚Äî</div>
            <div id="roundRecapLeaderNote" class="round-recap__note"></div>
          </div>
          <div class="round-recap__stat">
            <div class="round-recap__label">Your gap</div>
            <div id="roundRecapGap" class="round-recap__value">‚Äî</div>
            <div id="roundRecapGapNote" class="round-recap__note"></div>
          </div>
          <div class="round-recap__stat" id="roundRecapBonusStat">
            <div class="round-recap__label">Bonus</div>
            <div id="roundRecapBonus" class="round-recap__value">‚Äî</div>
            <div id="roundRecapBonusNote" class="round-recap__note"></div>
          </div>
          <div class="round-recap__stat">
            <div class="round-recap__label">Rounds left</div>
            <div id="roundRecapRoundsLeft" class="round-recap__value">‚Äî</div>
            <div id="roundRecapRoundsLeftNote" class="round-recap__note"></div>
          </div>
        </div>
      </div>
      <div class="round-recap__footer">
        <span id="roundRecapFooterNote" class="round-recap__footer-note"></span>
        <button id="roundRecapDismiss" class="round-recap__dismiss" type="button">Dismiss recap</button>
      </div>
    </div>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="/public/player.js"></script>
</body></html>
