<!doctype html>
<html><head><meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
<title>Player · Time-Bank Auction</title>
<style>
  :root{ --bg:#0e0f12; --fg:#f2f3f7; --muted:#9aa0a6; --accent:#10b981; --danger:#ef4444; --disabled:#4b5563; }
  html,body{height:100%}
  body{margin:0;background:var(--bg);color:var(--fg);font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;min-height:100dvh;padding:calc(24px + env(safe-area-inset-top)) 0 32px}
  .wrap{max-width:560px;width:100%;padding:20px;display:flex;flex-direction:column;align-items:stretch;gap:24px}
  .joinHeader{position:relative;padding:26px 22px;border-radius:24px;background:linear-gradient(145deg,rgba(9,16,28,.88) 0%,rgba(14,25,44,.72) 65%,rgba(12,18,32,.68) 100%);border:1px solid rgba(54,88,128,.45);box-shadow:0 24px 60px rgba(4,8,16,.55);overflow:hidden;text-align:center;backdrop-filter:blur(18px)}
  .joinHeader::before{content:"";position:absolute;inset:-40% -30%;background:radial-gradient(circle at 50% 20%,rgba(82,246,255,.35) 0%,rgba(30,155,205,.08) 42%,transparent 70%);opacity:.8;pointer-events:none;transform:rotate(12deg)}
  .joinHeader::after{content:"";position:absolute;inset:1px;border-radius:22px;border:1px solid rgba(151,240,255,.14);opacity:.75;pointer-events:none}
  .joinHeaderInner{position:relative;z-index:1;display:flex;flex-direction:column;align-items:center;gap:12px}
  .headerBadge{text-transform:uppercase;letter-spacing:.4em;font-size:11px;font-weight:700;color:#5de4ff;background:rgba(12,41,57,.65);border:1px solid rgba(86,189,214,.5);border-radius:999px;padding:6px 18px;box-shadow:0 0 18px rgba(45,179,215,.35)}
  .gameTitle{margin:0;font-size:clamp(32px,8vw,46px);font-weight:900;letter-spacing:.32em;text-transform:uppercase;background:linear-gradient(120deg,#61f2ff 0%,#33c7ff 35%,#0e234a 90%);-webkit-background-clip:text;color:transparent;text-shadow:0 4px 26px rgba(20,172,215,.45);line-height:1.15}
  .gameSubtitle{font-size:clamp(13px,3.6vw,16px);letter-spacing:.24em;text-transform:uppercase;color:#9bd7ff;text-shadow:0 0 18px rgba(95,204,255,.25)}
  .joinHeaderDivider{width:84px;height:2px;background:linear-gradient(90deg,transparent 0%,rgba(99,219,255,.85) 50%,transparent 100%);opacity:.75}
  .joinHeaderMeta{display:flex;gap:12px;flex-wrap:wrap;justify-content:center;font-size:12px;letter-spacing:.18em;text-transform:uppercase;color:#6ba5d6}
  .joinHeaderMeta span{padding:6px 12px;border-radius:999px;background:rgba(19,36,54,.6);border:1px solid rgba(69,136,177,.4);box-shadow:0 0 24px rgba(48,149,198,.25)}
  .joinRules{background:linear-gradient(145deg,rgba(9,15,27,.88) 0%,rgba(10,20,36,.74) 60%,rgba(9,16,28,.7) 100%);border:1px solid rgba(49,80,120,.5);border-radius:22px;padding:22px 24px;box-shadow:0 18px 54px rgba(0,0,0,.55);display:grid;gap:18px;backdrop-filter:blur(16px)}
  .joinRulesHeader{display:flex;align-items:center;justify-content:space-between;gap:16px;flex-wrap:wrap}
  .joinRulesTitle{margin:0;font-size:18px;font-weight:800;letter-spacing:.22em;text-transform:uppercase;color:#9ae9ff;text-shadow:0 0 24px rgba(94,223,255,.35)}
  .joinRulesAccent{flex:1;height:1px;min-width:120px;background:linear-gradient(90deg,rgba(97,242,255,.05) 0%,rgba(97,242,255,.5) 45%,rgba(14,35,74,.8) 100%);box-shadow:0 0 18px rgba(40,174,219,.25)}
  .rulesList{margin:0;padding-left:18px;display:grid;gap:10px;color:#c3d9f5;font-size:14px;line-height:1.55}
  .rulesList li{background:rgba(15,26,44,.58);border:1px solid rgba(60,112,162,.4);border-radius:14px;padding:12px 16px;list-style:none;position:relative}
  .rulesList li::before{content:"";position:absolute;left:10px;top:50%;width:6px;height:6px;border-radius:999px;background:#5cf0ff;box-shadow:0 0 14px rgba(95,240,255,.7);transform:translate(-50%,-50%)}
  .rulesList strong{color:#aff4ff;font-weight:700}
  @media (max-width:540px){
    .wrap{padding:16px;gap:20px}
    .joinHeader{padding:22px 18px;border-radius:20px}
    .joinHeader::after{border-radius:18px}
    .gameTitle{letter-spacing:.26em}
    .joinHeaderDivider{width:72px}
    .joinRules{padding:20px 18px}
    .joinRulesTitle{font-size:16px;letter-spacing:.18em}
  }
  .card{background:#12151b;border:1px solid #1f2632;border-radius:20px;box-shadow:0 10px 30px rgba(0,0,0,.35)}
  .pad{padding:18px}
  h1{font-size:18px;margin:0 0 8px}
  .muted{color:#9aa0a6;font-size:13px}
  .row{display:flex;gap:10px;align-items:center}
  input,button{font:inherit}
  input[type=text]{width:100%;padding:12px 14px;border-radius:12px;border:1px solid #2a3444;background:#0b0e13;color:var(--fg)}
  .btn{padding:12px 16px;border-radius:14px;border:1px solid #334155;background:#0b0e13;color:var(--fg)}
  .btn.primary{background:var(--accent);color:#00160e;border-color:#08946d}
  .text-link{background:none;border:0;padding:0;color:#93c5fd;text-decoration:underline;font:inherit;font-size:13px;cursor:pointer}
  .center{display:flex;align-items:center;justify-content:center}
  .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace}

  /* Player HUD header */
  .playerHud{display:flex;gap:12px;margin:12px 0 16px;align-items:stretch;justify-content:space-between;flex-wrap:nowrap}
  .playerHud__panel{position:relative;padding:14px 16px;border-radius:18px;background:linear-gradient(155deg,rgba(16,26,44,.9) 0%,rgba(10,15,28,.78) 60%,rgba(9,12,22,.86) 100%);border:1px solid rgba(62,94,138,.52);box-shadow:0 16px 42px rgba(5,10,20,.5);display:flex;flex-direction:column;gap:6px;overflow:hidden;flex:1 1 0;min-width:0}
  .playerHud__panel::after{content:"";position:absolute;inset:1px;border-radius:16px;border:1px solid rgba(126,196,255,.18);opacity:.75;pointer-events:none}
  .playerHud__panel::before{content:"";position:absolute;inset:-25% -20%;background:radial-gradient(circle at 24% 18%,rgba(94,224,255,.24) 0%,transparent 62%);opacity:.8;pointer-events:none}
  .playerHud__panel > *{position:relative;z-index:1}
  .playerHud__label{font-size:11px;letter-spacing:.18em;text-transform:uppercase;color:#7aa9d6;font-weight:700;white-space:nowrap}
  .playerHud__value{font-weight:800;font-size:clamp(14px,3.2vw,17px);letter-spacing:.02em;color:#f1f5f9;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
  .playerHud__sub{color:#9aa0a6;font-size:clamp(10px,2.4vw,12px);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
  .playerHud__panel--status{justify-content:center;align-items:center;text-align:center;padding:16px 14px;gap:8px}
  .playerHud__panel--identity .playerHud__value{font-size:clamp(15px,3.4vw,18px)}
  #phaseBar{display:flex;align-items:center;gap:10px;flex-wrap:wrap;justify-content:center;margin:0;text-align:left}
  .phaseBadge{font-weight:800;font-size:clamp(11px,2.6vw,12px);padding:5px 12px;border-radius:999px;border:1px solid transparent;letter-spacing:.16em;text-transform:uppercase;box-shadow:0 0 18px rgba(59,130,246,.28);background:#0f172a;color:#e2e8f0;white-space:nowrap}
  .phaseCopy{color:#cbd5f5;font-size:clamp(10px,2.8vw,12px);opacity:.9;max-width:none}
  .ph-idle{background:#0f172a;color:#e2e8f0;border-color:#1f2937}
  .ph-arming{background:#f59e0b20;color:#fbbf24;border-color:#f59e0b55}
  .ph-countdown{background:#fb923c20;color:#fdba74;border-color:#fb923c55}
  .ph-active{background:#10b98120;color:#34d399;border-color:#10b98155}
  .ph-ended{background:#6d28d920;color:#c4b5fd;border-color:#6d28d955}
  .ph-exhausted{background:#4b556320;color:#cbd5e1;border-color:#4b556355}
  .playerHud__panel--tokens{align-items:flex-end;text-align:right}
  .playerHud__panel--tokens .playerHud__value{display:flex;align-items:center;justify-content:flex-end;gap:6px;font-size:clamp(15px,3.4vw,18px)}
  .playerHud__panel--tokens .playerHud__value span{font-size:clamp(16px,3.6vw,19px)}
  .playerHud__panel--tokens .tokenIcon{font-size:22px;color:#fbbf24;text-shadow:0 0 16px rgba(251,191,36,.45);}
  @media (max-width:560px){
    .playerHud{gap:8px}
    .playerHud__panel{padding:12px 12px}
    .playerHud__panel--tokens,.playerHud__panel--status{align-items:flex-start;text-align:left}
    .playerHud__panel--tokens .playerHud__value{justify-content:flex-start}
    #phaseBar{justify-content:flex-start}
  }

  /* Round timer */
  .roundTimerPanel{position:relative;margin:12px 0 10px;padding:18px 22px;border-radius:24px;background:radial-gradient(circle at 12% 12%,rgba(59,130,246,.22) 0%,rgba(12,18,32,.35) 50%,rgba(10,13,22,.92) 100%);border:1px solid rgba(63,120,224,.45);box-shadow:0 18px 48px rgba(8,14,28,.55);display:grid;gap:10px;overflow:hidden;transition:border-color .28s ease,box-shadow .3s ease,transform .3s ease;
    --timer-accent:#38bdf8;--timer-glow:rgba(56,189,248,.38);--timer-bg:rgba(15,23,42,.72);--timer-label:#cbd5f5;--timer-value:#f8fafc;
  }
  .roundTimerPanel::before{content:"";position:absolute;inset:-40% -30%;background:radial-gradient(circle at 24% 26%,var(--timer-glow) 0%,transparent 60%);opacity:.85;filter:blur(0);pointer-events:none;transition:opacity .28s ease,transform .6s ease;
  }
  .roundTimerPanel::after{content:"";position:absolute;inset:1px;border-radius:22px;border:1px solid rgba(148,197,255,.24);opacity:.8;pointer-events:none;mix-blend-mode:screen}
  .roundTimerLabel{position:relative;z-index:1;font-size:12px;letter-spacing:.26em;text-transform:uppercase;color:var(--timer-label);font-weight:700;display:flex;align-items:center;gap:10px}
  .roundTimerLabel::after{content:"";flex:1;height:1px;background:linear-gradient(90deg,rgba(148,197,255,.18) 0%,rgba(148,197,255,.5) 60%,transparent 100%);border-radius:99px;opacity:.8}
  .roundTimerValue{position:relative;z-index:1;font-size:clamp(32px,10vw,58px);font-weight:900;letter-spacing:.08em;color:var(--timer-value);text-shadow:0 10px 28px rgba(14,23,42,.75),0 0 18px var(--timer-glow);transition:color .28s ease,text-shadow .28s ease}
  .roundTimerPanel.is-idle{--timer-accent:#38bdf8;--timer-glow:rgba(56,189,248,.35);--timer-label:#cbd5f5;--timer-bg:rgba(15,23,42,.72)}
  .roundTimerPanel.is-arming{--timer-accent:#fbbf24;--timer-glow:rgba(251,191,36,.32);--timer-label:#fcd34d;--timer-value:#fef3c7;transform:translateY(0);box-shadow:0 20px 54px rgba(92,64,12,.45)}
  .roundTimerPanel.is-countdown{--timer-accent:#fb923c;--timer-glow:rgba(251,146,60,.38);--timer-label:#fdba74;--timer-value:#fff7ed;animation:roundTimerPulse 1.4s ease-in-out infinite}
  .roundTimerPanel.is-active{--timer-accent:#34d399;--timer-glow:rgba(52,211,153,.38);--timer-label:#bbf7d0;--timer-value:#ecfdf5;animation:roundTimerPulse 1.1s ease-in-out infinite;box-shadow:0 24px 60px rgba(12,56,40,.55)}
  .roundTimerPanel.is-ended{--timer-accent:#a855f7;--timer-glow:rgba(168,85,247,.34);--timer-label:#ddd6fe;--timer-value:#ede9fe;box-shadow:0 20px 48px rgba(67,26,120,.45)}
  .roundTimerPanel.is-exhausted{--timer-accent:#94a3b8;--timer-glow:rgba(148,163,184,.28);--timer-label:#cbd5f5;--timer-value:#e2e8f0;opacity:.9;box-shadow:0 18px 40px rgba(11,13,18,.4)}
  .roundTimerPanel.is-idle::before,.roundTimerPanel.is-ended::before,.roundTimerPanel.is-exhausted::before{transform:translate3d(0,0,0)}
  .roundTimerPanel.is-countdown::before{opacity:.95;transform:translate3d(4%,4%,0)}
  .roundTimerPanel.is-active::before{opacity:1;animation:roundTimerSweep 3s linear infinite}
  .roundTimerPanel.is-arming::before{opacity:.92;transform:translate3d(-6%,-4%,0)}
  .roundTimerPanel.is-idle,.roundTimerPanel.is-ended,.roundTimerPanel.is-exhausted{animation:none}
  .roundTimerPanel .roundTimerValue::after{content:"";position:absolute;inset:auto 0 -8px;height:2px;background:linear-gradient(90deg,transparent 0%,var(--timer-accent) 45%,transparent 100%);opacity:.55;border-radius:999px;pointer-events:none}
  @keyframes roundTimerPulse{0%{transform:translateY(0) scale(1);}50%{transform:translateY(-2px) scale(1.01);}100%{transform:translateY(0) scale(1);}}
  @keyframes roundTimerSweep{0%{transform:translate(-10%, -10%) rotate(0deg);}50%{transform:translate(6%,6%) rotate(1turn);}100%{transform:translate(-10%, -10%) rotate(2turn);}}
  @media (max-width:540px){
    .roundTimerPanel{padding:16px 18px;border-radius:20px;margin:12px 0 8px}
    .roundTimerLabel{font-size:11px;letter-spacing:.2em}
    .roundTimerValue{font-size:clamp(28px,16vw,48px)}
  }
  @media (max-width:400px){
    .roundTimerPanel{padding:14px 16px}
    .roundTimerLabel{letter-spacing:.16em}
    .roundTimerValue{font-size:clamp(26px,18vw,44px)}
  }

  /* Circular hold button */
  .hold{ --hold-outer-metal:linear-gradient(155deg,#27303c 0%,#0f172a 52%,#0b1220 100%); --hold-inner-metal:linear-gradient(160deg,#0b1628 0%,#111d30 55%,#050912 100%); --hold-emissive-color:rgba(56,189,248,.32); --hold-glow-color:rgba(56,189,248,.5); --hold-plate-glass:linear-gradient(145deg,rgba(255,255,255,.22) 0%,rgba(255,255,255,.05) 52%,rgba(255,255,255,0) 82%); --hold-ring-border:rgba(148,197,255,.25); --hold-outline:rgba(56,189,248,.45); --hold-text:#f8fafc; --hold-sub:#94a3b8; --hold-voltage:0; --hold-glow-period:2.2s; --hold-jitter:0; position:relative; width:min(72vw,420px); aspect-ratio:1; max-width:420px; min-width:220px; max-height:420px; min-height:220px; border-radius:9999px; margin:18px auto 6px; display:grid; place-items:center; user-select:none; -webkit-user-select:none; touch-action:manipulation; transition:transform .08s ease, filter .25s ease, opacity .2s ease; cursor:pointer; }
  .hold:focus-visible{ outline:3px solid var(--hold-outline); outline-offset:6px; }
  .hold:active{ transform:scale(.985); }
  .hold__outer,.hold__inner,.hold__label{ position:relative; border-radius:50%; }
  .hold__outer{ position:absolute; inset:0; padding:10%; pointer-events:none; }
  .hold__outer-metal,.hold__outer-glow{ position:absolute; inset:0; border-radius:inherit; pointer-events:none; }
  .hold__outer-metal{ z-index:2; background:var(--hold-outer-metal); box-shadow:inset 0 4px 14px rgba(0,0,0,.55), inset 0 -12px 24px rgba(0,0,0,.65); filter:saturate(calc(1 + var(--hold-voltage)*.45)); transition:filter .35s ease; }
  .hold__outer-metal::after{ content:""; position:absolute; inset:4%; border-radius:inherit; border:1px solid var(--hold-ring-border); box-shadow:0 0 calc(28px + 34px * var(--hold-voltage)) rgba(15,118,110,.24),0 18px 42px rgba(8,11,20,.75); opacity:.75; mix-blend-mode:screen; transition:box-shadow .35s ease; }
  .hold__outer-glow{ z-index:1; inset:-4%; background:radial-gradient(circle,var(--hold-glow-color) 0%,rgba(15,23,42,0) 70%); filter:blur(18px); opacity:.65; transform:scale(1); transform-origin:50% 50%; transition:opacity .25s ease, transform .32s ease, filter .28s ease; }
  .hold__inner{ position:relative; width:72%; aspect-ratio:1; display:grid; place-items:center; filter:drop-shadow(0 18px 36px rgba(0,0,0,.55)); pointer-events:none; z-index:3; animation:none; }
  .hold::before,.hold::after{ content:""; position:absolute; inset:10%; border-radius:inherit; pointer-events:none; opacity:0; transition:opacity .4s ease, filter .5s ease; }
  .hold::before{ background:repeating-linear-gradient(180deg,rgba(140,198,255,.0) 0%,rgba(140,198,255,.16) 20px,rgba(140,198,255,0) 40px); mix-blend-mode:screen; filter:blur(0); }
  .hold::after{ inset:-6%; background:conic-gradient(from 90deg,rgba(255,255,255,0) 0deg 36deg,rgba(255,214,163,.5) 36deg 42deg,rgba(255,255,255,0) 42deg 78deg,rgba(255,172,120,.32) 78deg 84deg,rgba(255,255,255,0) 84deg 120deg); filter:blur(8px); transform-origin:50% 50%; }
  .hold__plate{ position:absolute; inset:0; border-radius:inherit; background:var(--hold-inner-metal); box-shadow:inset 0 12px 28px rgba(0,0,0,.65), inset 0 -16px 32px rgba(12,16,26,.85); overflow:hidden; }
  .hold__plate::before{ content:""; position:absolute; inset:0; border-radius:inherit; background:radial-gradient(circle at 20% 22%,rgba(255,255,255,.12) 0%,rgba(255,255,255,0) 54%),radial-gradient(circle at 78% 74%,rgba(255,255,255,.1) 0%,rgba(255,255,255,0) 52%); opacity:0; mix-blend-mode:screen; transition:opacity .35s ease, filter .45s ease; }
  .hold__plate::after{ content:""; position:absolute; inset:12%; border-radius:inherit; border:1px solid rgba(255,255,255,.08); opacity:.75; }
  .hold__plate-highlight{ position:absolute; inset:0; border-radius:inherit; background:var(--hold-plate-glass); mix-blend-mode:screen; opacity:.9; transition:filter .45s ease, opacity .35s ease; }
  .hold__seam{ position:absolute; left:50%; width:2px; height:58%; background:linear-gradient(180deg,rgba(255,255,255,.42) 0%,rgba(255,255,255,0) 100%); opacity:.38; transform:translateX(-50%); }
  .hold__seam--north{ top:10%; }
  .hold__seam--south{ top:auto; bottom:10%; transform:translateX(-50%) rotate(180deg); }
  .hold__emissive{ position:absolute; inset:18%; border-radius:inherit; background:radial-gradient(circle at 50% 55%,var(--hold-emissive-color) 0%,rgba(15,23,42,0) 70%); opacity:.75; transition:opacity .2s ease, filter .28s ease, box-shadow .3s ease; box-shadow:0 0 calc(24px + 42px * var(--hold-voltage)) rgba(16,185,129,.16); filter:blur(calc(1px + 4px * var(--hold-voltage))); }
  .hold__inner::before{ content:""; position:absolute; inset:10%; border-radius:inherit; background:radial-gradient(ellipse at 50% 110%,rgba(255,255,255,.12) 0%,rgba(255,255,255,0) 60%); opacity:0; pointer-events:none; transform-origin:50% 50%; }
  .hold__inner::after{ content:""; position:absolute; inset:18%; border-radius:inherit; background:radial-gradient(circle at 30% 20%,rgba(255,255,255,.14) 0%,rgba(255,255,255,0) 55%); opacity:0; pointer-events:none; mix-blend-mode:screen; }
  .hold__label{ position:relative; z-index:4; text-align:center; padding:6px 12px; }
  .holdText{ font-size:22px; letter-spacing:.04em; text-align:center; color:var(--hold-text); text-shadow:0 6px 20px rgba(0,0,0,.65); transition:color .2s ease,text-shadow .32s ease; display:inline-block; }
  .holdSub{ color:var(--hold-sub); font-size:12px; margin-top:6px; text-align:center; letter-spacing:.02em; transition:color .2s ease, text-shadow .32s ease; display:inline-block; }
  @keyframes holdGlowPulse{ 0%,100%{ opacity:.68; transform:scale(1); filter:blur(18px); } 35%{ opacity:.92; transform:scale(1.05); filter:blur(14px); } 52%{ opacity:.78; transform:scale(1.02); filter:blur(17px); } }
  @keyframes holdSeamFlicker{ 0%,100%{ opacity:.32; } 12%{ opacity:.62; } 22%{ opacity:.18; } 36%{ opacity:.5; } 52%{ opacity:.28; } 68%{ opacity:.58; } }
  @keyframes holdInnerVibrate{ 0%,100%{ transform:translate3d(0,0,0) rotate(0deg); } 15%{ transform:translate3d(calc(.4px * var(--hold-jitter)),calc(-.35px * var(--hold-jitter)),0) rotate(calc(-.25deg * var(--hold-jitter))); } 33%{ transform:translate3d(calc(-.35px * var(--hold-jitter)),calc(.42px * var(--hold-jitter)),0) rotate(calc(.18deg * var(--hold-jitter))); } 52%{ transform:translate3d(calc(.28px * var(--hold-jitter)),calc(.45px * var(--hold-jitter)),0) rotate(calc(.2deg * var(--hold-jitter))); } 74%{ transform:translate3d(calc(-.48px * var(--hold-jitter)),calc(-.3px * var(--hold-jitter)),0) rotate(calc(-.28deg * var(--hold-jitter))); } }
  @keyframes holdInnerPendulum{ 0%,100%{ transform:translate3d(0,0,0) rotate(-1.4deg); } 50%{ transform:translate3d(.8px,-.6px,0) rotate(1.4deg); } }
  @keyframes holdScanline{ 0%{ transform:translateY(-10%); opacity:.18; } 40%{ opacity:.42; } 100%{ transform:translateY(12%); opacity:.12; } }
  @keyframes holdSparkOrbit{ 0%{ transform:rotate(0deg); } 100%{ transform:rotate(360deg); } }
  @keyframes holdVaporRise{ 0%{ opacity:0; transform:translate3d(-6%,12%,0) scale(.88); } 30%{ opacity:.45; } 60%{ opacity:.2; } 100%{ opacity:0; transform:translate3d(8%,-14%,0) scale(1.18); } }
  @keyframes holdFaultLine{ 0%,100%{ opacity:.32; filter:hue-rotate(-6deg); } 42%{ opacity:.72; filter:hue-rotate(6deg); } 64%{ opacity:.48; filter:hue-rotate(2deg); } }
  @keyframes holdTextShudder{ 0%,100%{ transform:translateX(0); text-shadow:0 6px 20px rgba(0,0,0,.65); } 28%{ transform:translateX(.6px); text-shadow:0 0 18px rgba(255,255,255,.32); } 54%{ transform:translateX(-.8px); text-shadow:0 0 22px rgba(255,255,255,.28); } 76%{ transform:translateX(.4px); }
  }
  .hold--pressed:not(.hold--disabled) .hold__outer-glow{ animation:holdGlowPulse var(--hold-glow-period) ease-in-out infinite; }
  .hold--tier1{ --hold-glow-period:1.7s; --hold-jitter:.7; }
  .hold--tier1::after{ opacity:.18; animation:holdSparkOrbit 3.6s linear infinite; }
  .hold--tier1 .hold__seam{ animation:holdSeamFlicker 1.8s steps(3,end) infinite; }
  .hold--tier2{ --hold-glow-period:1.5s; --hold-jitter:.9; }
  .hold--tier2::after{ opacity:.28; animation:holdSparkOrbit 3s linear infinite; filter:blur(6px); }
  .hold--tier2 .hold__inner{ animation:holdInnerVibrate 1.6s ease-in-out infinite; }
  .hold--tier2 .hold__emissive{ filter:blur(calc(2px + 4px * var(--hold-voltage))); }
  .hold--tier3{ --hold-glow-period:1.25s; --hold-jitter:1.1; }
  .hold--tier3::before{ opacity:.24; animation:holdScanline 2.1s linear infinite; }
  .hold--tier3::after{ opacity:.34; animation-duration:2.4s; }
  .hold--tier3 .hold__inner{ animation:holdInnerVibrate 1.3s ease-in-out infinite; }
  .hold--tier3 .hold__plate-highlight{ filter:blur(2px); }
  .hold--tier4{ --hold-glow-period:1.05s; --hold-jitter:1.4; }
  .hold--tier4::before{ opacity:.36; animation-duration:1.5s; }
  .hold--tier4::after{ opacity:.48; animation-duration:1.8s; filter:blur(4px); }
  .hold--tier4 .hold__inner{ animation:holdInnerVibrate 1.05s ease-in-out infinite; }
  .hold--tier4 .hold__plate-highlight{ opacity:.78; filter:blur(3px); }
  .hold--tier4 .hold__seam{ animation-duration:1s; opacity:.55; }
  .hold--tier5{ --hold-glow-period:.9s; --hold-jitter:1.8; }
  .hold--tier5::before{ opacity:.46; animation-duration:1.3s; }
  .hold--tier5::after{ opacity:.62; animation-duration:1.4s; filter:blur(3px); }
  .hold--tier5 .hold__inner{ animation:holdInnerVibrate .85s ease-in-out infinite; }
  .hold--tier5 .hold__inner::before{ opacity:.45; animation:holdVaporRise 2.6s ease-in-out infinite; }
  .hold--tier5 .hold__inner::after{ opacity:.5; animation:holdVaporRise 3.1s ease-in-out infinite reverse; }
  .hold--tier5 .hold__plate::before{ opacity:.32; }
  .hold--tier5 .holdText,.hold--tier5 .holdSub{ animation:holdTextShudder 1.8s ease-in-out infinite; }
  .hold--tier6{ --hold-glow-period:.75s; --hold-jitter:2.4; }
  .hold--tier6::before{ opacity:.65; animation-duration:1.05s; }
  .hold--tier6::after{ opacity:.85; animation-duration:1.1s; filter:blur(1px); }
  .hold--tier6 .hold__outer-glow{ opacity:1; }
  .hold--tier6 .hold__inner{ animation:holdInnerPendulum 1.45s ease-in-out infinite, holdInnerVibrate .65s ease-in-out infinite; }
  .hold--tier6 .hold__inner::before{ opacity:.65; animation:holdVaporRise 2s ease-in-out infinite; }
  .hold--tier6 .hold__inner::after{ opacity:.72; animation:holdVaporRise 2.4s ease-in-out infinite reverse; }
  .hold--tier6 .hold__plate::before{ opacity:.68; animation:holdFaultLine 1.25s steps(3,end) infinite; }
  .hold--tier6 .hold__plate-highlight{ opacity:.72; filter:blur(4px) saturate(135%); }
  .hold--tier6 .hold__seam{ animation-duration:.75s; opacity:.68; }
  .hold--tier6 .holdText,.hold--tier6 .holdSub{ animation:holdTextShudder 1.1s ease-in-out infinite; }
  .hold--ready .hold__emissive{ opacity:.82; }
  .hold--ready .hold__outer-glow{ opacity:.72; }
  .hold--pressed{ transform:scale(.99); }
  .hold--pressed:active{ transform:scale(.985); }
  .hold--pressed .hold__plate{ box-shadow:inset 0 16px 32px rgba(0,0,0,.7), inset 0 -20px 38px rgba(8,12,18,.95); }
  .hold--pressed .hold__emissive{ opacity:1; filter:blur(calc(3px + 4px * var(--hold-voltage))); }
  .hold--pressed .hold__outer-glow{ opacity:.9; transform:scale(1.06); }
  .hold--disabled{ cursor:not-allowed; opacity:.6; filter:saturate(.55); }
  .hold--disabled .hold__emissive{ opacity:.25; }
  .hold--disabled .hold__outer-glow{ opacity:.25; }
  .hold--idlePhase{ --hold-outer-metal:linear-gradient(155deg,#27303c 0%,#0f172a 52%,#0b1220 100%); --hold-inner-metal:linear-gradient(160deg,#0b1628 0%,#111d30 55%,#050912 100%); --hold-emissive-color:rgba(56,189,248,.32); --hold-glow-color:rgba(56,189,248,.5); --hold-text:#f8fafc; --hold-sub:#94a3b8; }
  .hold--arming{ --hold-outer-metal:linear-gradient(150deg,#4c3012 0%,#2d1c08 52%,#140c05 100%); --hold-inner-metal:linear-gradient(160deg,#36220d 0%,#2b1804 52%,#170c04 100%); --hold-emissive-color:rgba(251,191,36,.42); --hold-glow-color:rgba(251,191,36,.55); --hold-text:#fff7d6; --hold-sub:#fde68a; }
  .hold--countdown{ --hold-outer-metal:linear-gradient(150deg,#48240d 0%,#2b0c05 52%,#1a0603 100%); --hold-inner-metal:linear-gradient(160deg,#341107 0%,#290803 50%,#170402 100%); --hold-emissive-color:rgba(249,115,22,.45); --hold-glow-color:rgba(251,146,60,.58); --hold-text:#fff3e0; --hold-sub:#fed7aa; }
  .hold--active{ --hold-outer-metal:linear-gradient(150deg,#0f3a2b 0%,#082119 52%,#04120c 100%); --hold-inner-metal:linear-gradient(160deg,#06251a 0%,#041911 50%,#020d08 100%); --hold-emissive-color:rgba(34,197,94,.48); --hold-glow-color:rgba(16,185,129,.62); --hold-text:#ecfdf5; --hold-sub:#bbf7d0; }
  .hold--ended{ --hold-outer-metal:linear-gradient(155deg,#331c58 0%,#1d0f38 55%,#0c0416 100%); --hold-inner-metal:linear-gradient(160deg,#220c46 0%,#18062e 50%,#090215 100%); --hold-emissive-color:rgba(168,85,247,.46); --hold-glow-color:rgba(147,197,253,.55); --hold-text:#ede9fe; --hold-sub:#ddd6fe; }
  .hold--exhausted{ --hold-outer-metal:linear-gradient(155deg,#2f3338 0%,#1b1d22 52%,#0f1013 100%); --hold-inner-metal:linear-gradient(160deg,#1f2126 0%,#14161b 50%,#08090c 100%); --hold-emissive-color:rgba(148,163,184,.28); --hold-glow-color:rgba(148,163,184,.32); --hold-text:#cbd5f5; --hold-sub:#94a3b8; }
  .hold.bonus,.hold--bonus{ --hold-outer-metal:linear-gradient(150deg,#3a2a08 0%,#1f1602 55%,#110b03 100%); --hold-inner-metal:linear-gradient(160deg,#2f2005 0%,#211503 52%,#140a02 100%); --hold-emissive-color:rgba(253,224,71,.55); --hold-glow-color:rgba(212,175,55,.65); --hold-text:#fef9c3; --hold-sub:#fde68a; }
  .hold.no-hold{ --hold-outer-metal:linear-gradient(155deg,#3d1016 0%,#24070a 55%,#120204 100%); --hold-inner-metal:linear-gradient(160deg,#2f050c 0%,#220307 50%,#120104 100%); --hold-emissive-color:rgba(248,113,113,.45); --hold-glow-color:rgba(248,113,113,.6); --hold-text:#fee2e2; --hold-sub:#fecaca; }
  .hold.no-hold .hold__outer-glow{ animation:holdNoWinnerPulse 1.4s ease-in-out infinite; }
  .round-result{ margin-top:10px; font-size:14px; color:var(--muted); font-weight:500; transition:color .2s ease, text-shadow .35s ease; }
  .round-result.round-result--alert{ color:#fecaca; font-weight:700; text-shadow:0 0 12px rgba(248,113,113,.45); }

  .gameMeta{display:grid;gap:10px;margin:12px 0 4px;grid-template-columns:repeat(2,minmax(0,1fr))}
  @media (max-width:340px){ .gameMeta{grid-template-columns:1fr;} }
  .metaItem{background:#11141c;border:1px solid #1f2632;border-radius:14px;padding:12px 14px}
  .metaLabel{margin:0 0 6px;font-size:11px;letter-spacing:.12em;text-transform:uppercase;color:#94a3b8}
  .metaValue{font-weight:700;font-size:15px}
  .metaSub{color:#9aa0a6;font-size:12px;margin-top:4px}

  /* Countdown overlay */
  #countdownOverlay{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,.35); }
  #countdownDigit{ font-size:72px; font-weight:800; color:#f8fafc; text-shadow:0 6px 24px rgba(0,0,0,.45); }

  .toast{position:fixed;bottom:16px;left:50%;transform:translateX(-50%);background:#0b0e13;border:1px solid #2a3444;color:#f8fafc;padding:12px 14px;border-radius:12px}

  /* Public scoreboard */
  #publicScoreCard{ display:none; margin-top:14px }
  #publicScoreCard table{ width:100%; border-collapse:collapse }
  #publicScoreCard th,#publicScoreCard td{ border-bottom:1px solid #1f2632; padding:6px 8px; text-align:left }
  #publicScoreCard .rank{ width:1%; white-space:nowrap; }

  /* Final modal */
  #finalModal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;padding:clamp(20px,5vw,64px);background:radial-gradient(120% 120% at 50% 50%,rgba(4,8,16,.85) 0%,rgba(2,4,10,.96) 100%);overflow:hidden;z-index:320;color:#e6f1ff;opacity:0;visibility:hidden;pointer-events:none;transition:opacity .45s ease;}
  #finalModal::after{content:"";position:absolute;inset:0;background:radial-gradient(160% 160% at 50% 0%,rgba(24,92,255,.32) 0%,rgba(11,26,58,.75) 45%,rgba(4,12,28,.92) 100%);mix-blend-mode:screen;opacity:.55;pointer-events:none;}
  #finalModal.show{opacity:1;visibility:visible;pointer-events:auto;}
  .final-modal__ambient{position:absolute;inset:-20%;pointer-events:none;overflow:hidden;z-index:0;}
  .final-modal__spot{position:absolute;width:120vmax;height:120vmax;filter:blur(0);opacity:.55;transform:translate3d(0,0,0) scale(1.05);mix-blend-mode:screen;animation:finalSpotDrift 24s ease-in-out infinite;}
  .final-modal__spot--one{top:-40%;left:-55%;background:radial-gradient(circle at 35% 35%,rgba(112,224,255,.65) 0%,rgba(36,130,255,.3) 35%,transparent 70%);}
  .final-modal__spot--two{bottom:-45%;right:-50%;background:radial-gradient(circle at 65% 65%,rgba(255,143,96,.5) 0%,rgba(255,78,103,.25) 40%,transparent 72%);animation-duration:28s;}
  .final-modal__spot--three{top:20%;right:-35%;background:radial-gradient(circle at 50% 50%,rgba(94,255,218,.45) 0%,rgba(52,150,210,.24) 40%,transparent 70%);animation-duration:32s;}
  .final-modal__sweep{position:absolute;inset:-40% -60%;background:linear-gradient(105deg,transparent 20%,rgba(120,220,255,.32) 45%,rgba(255,255,255,.12) 52%,transparent 72%);transform:rotate(12deg);mix-blend-mode:screen;opacity:.55;animation:finalSweep 9s linear infinite;}
  #finalCard{position:relative;z-index:1;max-width:min(760px,100%);width:min(100%,760px);border-radius:32px;padding:clamp(24px,4vw,40px);display:flex;flex-direction:column;gap:24px;background:linear-gradient(160deg,rgba(12,22,44,.92) 0%,rgba(6,14,32,.9) 48%,rgba(4,10,26,.94) 100%);border:1px solid rgba(102,189,255,.35);box-shadow:0 36px 120px rgba(5,12,32,.75),0 0 42px rgba(48,168,255,.35);backdrop-filter:blur(24px);-webkit-backdrop-filter:blur(24px);overflow:hidden;}
  #finalCard::before{content:"";position:absolute;inset:1px;border-radius:30px;border:1px solid rgba(156,229,255,.22);mix-blend-mode:screen;pointer-events:none;}
  #finalCard::after{content:"";position:absolute;inset:-40% -10% auto -10%;height:280px;background:radial-gradient(80% 60% at 50% 20%,rgba(104,224,255,.32) 0%,rgba(60,160,255,.18) 40%,transparent 72%);opacity:.85;pointer-events:none;transform:translate3d(0,-16px,0);}
  .final-modal__header{position:relative;z-index:1;display:grid;gap:12px;align-items:flex-start;text-transform:uppercase;letter-spacing:.28em;}
  .final-modal__header h2{margin:0;font-size:clamp(26px,6vw,42px);font-weight:900;letter-spacing:.24em;color:#f8fbff;text-shadow:0 18px 48px rgba(6,14,32,.6);}
  .final-modal__champion{margin:0;font-size:clamp(14px,3.5vw,18px);letter-spacing:.32em;color:#8cf5ff;text-shadow:0 0 28px rgba(84,224,255,.55);font-weight:700;}
  .final-modal__champion strong{color:#fff4c2;}
  #finalTable{position:relative;z-index:1;border-radius:24px;background:linear-gradient(160deg,rgba(11,26,52,.86) 0%,rgba(7,16,34,.9) 54%,rgba(3,8,20,.94) 100%);border:1px solid rgba(70,140,210,.35);box-shadow:inset 0 0 24px rgba(14,40,78,.5);padding:18px clamp(14px,4vw,24px);display:flex;flex-direction:column;gap:16px;max-height:min(60vh,520px);}
  #finalTable::before,#finalTable::after{content:"";position:absolute;left:18px;right:18px;height:18px;pointer-events:none;z-index:1;opacity:.45;transition:opacity .3s ease;}
  #finalTable::before{top:18px;background:linear-gradient(180deg,rgba(15,25,44,.8) 0%,rgba(15,25,44,0) 100%);}
  #finalTable::after{bottom:18px;background:linear-gradient(0deg,rgba(15,25,44,.85) 0%,rgba(15,25,44,0) 100%);}
  #finalTableInner{position:relative;z-index:2;overflow:auto;scrollbar-width:thin;max-height:100%;}
  #finalTableInner table{width:100%;border-collapse:collapse;font-size:14px;color:#e9f4ff;}
  #finalTableInner th,#finalTableInner td{padding:10px 12px;text-align:left;white-space:nowrap;}
  #finalTableInner th{font-size:12px;letter-spacing:.22em;text-transform:uppercase;color:#7fbfff;background:rgba(15,32,58,.75);position:sticky;top:0;backdrop-filter:blur(18px);-webkit-backdrop-filter:blur(18px);}
  #finalTableInner td{border-bottom:1px solid rgba(36,76,130,.35);}
  #finalTableInner tr:last-child td{border-bottom:0;}
  #finalTableInner tbody tr{transition:background .2s ease;} 
  #finalTableInner tbody tr:hover{background:rgba(40,120,200,.22);}
  #finalTableInner .muted{color:#9fb8d8;font-size:12px;}
  .final-modal__actions{display:flex;justify-content:flex-end;align-items:center;gap:12px;z-index:1;}
  .final-modal__actions .btn{background:rgba(14,34,60,.8);color:#f0f8ff;border:1px solid rgba(104,192,255,.45);padding:12px 22px;border-radius:999px;font-weight:700;letter-spacing:.12em;text-transform:uppercase;box-shadow:0 0 22px rgba(64,180,255,.28);transition:transform .18s ease,box-shadow .18s ease,background .18s ease;color:#f8fbff;}
  .final-modal__actions .btn:hover{transform:translateY(-1px);box-shadow:0 14px 32px rgba(40,160,255,.35);background:rgba(24,52,86,.9);}
  .final-modal__actions .btn:active{transform:translateY(0);}
  .final-modal__actions .btn:focus-visible{outline:2px solid rgba(255,255,255,.9);outline-offset:4px;box-shadow:0 0 0 4px rgba(53,146,255,.35);}
  @keyframes finalSpotDrift{0%{transform:translate3d(0,0,0) scale(1.05);opacity:.45;}50%{transform:translate3d(4%,6%,0) scale(1.1);opacity:.65;}100%{transform:translate3d(0,0,0) scale(1.05);opacity:.45;}}
  @keyframes finalSweep{0%{transform:translateX(-20%) rotate(12deg);}50%{transform:translateX(12%) rotate(12deg);}100%{transform:translateX(-20%) rotate(12deg);}}
  @media (max-width:640px){
    #finalCard{padding:clamp(20px,5vw,28px);border-radius:26px;}
    #finalCard::before{border-radius:24px;}
    #finalCard::after{height:220px;}
    .final-modal__header{letter-spacing:.22em;}
    .final-modal__champion{font-size:clamp(13px,4vw,16px);letter-spacing:.26em;}
    #finalTable{padding:16px 16px;max-height:55vh;}
    #finalTableInner th,#finalTableInner td{padding:9px 10px;font-size:13px;}
  }
  @media (max-width:420px){
    #finalModal{padding:18px;}
    #finalCard{padding:18px 16px;gap:20px;}
    .final-modal__header h2{font-size:clamp(24px,8vw,32px);}
    .final-modal__header{letter-spacing:.18em;}
    #finalTable{border-radius:20px;}
    .final-modal__actions{justify-content:center;}
    .final-modal__actions .btn{width:100%;justify-content:center;text-align:center;}
  }

  /* P210 layout guard */
  :root { --hud-h: 56px; }
  header,.top,.top-bar,.hud,.status-bar{ position:sticky; top:env(safe-area-inset-top); z-index:100; backdrop-filter:blur(6px); background:rgba(10,15,26,.6) }
  .public-scoreboard,#publicScoreboard,.scoreboard,[data-role="public-scoreboard"]{ max-height:calc(100dvh - var(--hud-h) - 16px - env(safe-area-inset-top)); overflow-y:auto; overscroll-behavior:contain; -webkit-overflow-scrolling:touch }

  /* P213 splash */
  :root{ --splash-bg: linear-gradient(180deg, #0b1223 0%, #0a0f1a 100%); }
  .splash{ position:relative; min-height:60dvh; display:flex; align-items:center; justify-content:center; text-align:center; padding:calc(16px + env(safe-area-inset-top)) 16px 12px; }
  .splash-bg{ position:absolute; inset:0; background:var(--splash-bg); }
  .splash-inner{ position:relative; z-index:1; max-width:720px; color:#e6f0ff }
  .splash-title{ margin:.6rem 0 .6rem; font-size:clamp(28px, 6vw, 48px); font-weight:800; letter-spacing:.2px }
  .splash-cta{ display:flex; gap:10px; justify-content:center; align-items:center; flex-wrap:wrap }
  .btn.primary{ background:#124c3a; color:#001; border:0; padding:.7rem 1rem; border-radius:12px; font-weight:800; cursor:pointer }
  .link{ color:#93c5fd; text-decoration:underline }

  /* Round recap panel */
  #roundRecapPanel{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;padding:28px 18px;z-index:220;pointer-events:none;visibility:hidden;opacity:0;transition:opacity .32s ease,visibility .32s ease;background:radial-gradient(120% 120% at 50% 10%,rgba(64,144,255,.35) 0%,rgba(12,26,54,.78) 45%,rgba(6,12,24,.92) 100%);backdrop-filter:blur(14px);-webkit-backdrop-filter:blur(14px);overflow:hidden}
  #roundRecapPanel::before{content:"";position:absolute;inset:0;background:radial-gradient(140% 140% at 50% 0%,rgba(0,140,255,.22) 0%,rgba(3,9,20,.85) 60%,rgba(3,8,18,.96) 100%);mix-blend-mode:screen;opacity:.65;pointer-events:none;z-index:0}
  #roundRecapPanel.show{visibility:visible;pointer-events:auto;opacity:1}
  #roundRecapPanel.closing{pointer-events:none;opacity:0}
  #roundRecapPanel .round-recap{position:relative;z-index:1;max-width:560px;width:min(100%,560px);background:linear-gradient(160deg,rgba(8,18,36,.94) 0%,rgba(6,14,30,.92) 55%,rgba(4,10,22,.96) 100%);border-radius:28px;border:1px solid rgba(74,202,255,.45);box-shadow:0 42px 120px rgba(6,18,40,.85),0 0 32px rgba(30,200,255,.4);overflow:hidden;transform:translate3d(0,32px,0) scale(.97);opacity:0;transition:transform .34s cubic-bezier(.22,1,.36,1),opacity .28s ease;pointer-events:auto;color:#e8f6ff}
  #roundRecapPanel .round-recap::before{content:"";position:absolute;inset:1px;border-radius:26px;border:1px solid rgba(94,247,255,.22);mix-blend-mode:screen;pointer-events:none}
  #roundRecapPanel .round-recap::after{content:"";position:absolute;inset:-20% -25% auto -25%;height:280px;background:radial-gradient(60% 60% at 50% 20%,rgba(66,225,255,.32) 0%,rgba(28,130,255,.12) 48%,transparent 70%);opacity:.8;pointer-events:none;transform:translateY(-16px)}
  #roundRecapPanel.show .round-recap{transform:translate3d(0,0,0) scale(1);opacity:1}
  #roundRecapPanel.closing .round-recap{transform:translate3d(0,32px,0) scale(.96);opacity:0}
  #roundRecapPanel.alert .round-recap{border-color:rgba(255,140,76,.6);box-shadow:0 42px 120px rgba(20,6,2,.8),0 0 32px rgba(255,128,72,.42)}
  #roundRecapPanel.alert .round-recap::before{border-color:rgba(255,189,143,.35)}
  #roundRecapPanel.alert .round-recap__eyebrow{color:#ffb38a;text-shadow:0 0 16px rgba(255,136,68,.55)}
  #roundRecapPanel.alert .round-recap__summary{color:#ffe8dd}
  .round-recap__header{position:relative;padding:28px 32px 22px;display:flex;align-items:flex-start;justify-content:space-between;gap:20px;background:linear-gradient(150deg,rgba(10,46,77,.92) 0%,rgba(7,22,42,.94) 55%,rgba(5,16,32,.98) 100%);box-shadow:inset 0 -1px 0 rgba(73,194,255,.35)}
  .round-recap__header::after{content:"";position:absolute;inset:auto 32px 12px 32px;height:1px;background:linear-gradient(90deg,rgba(73,194,255,.25) 0%,rgba(255,141,70,.4) 52%,rgba(73,194,255,.25) 100%);opacity:.7}
  .round-recap__header-text{display:grid;gap:10px}
  .round-recap__eyebrow{font-size:12px;letter-spacing:.46em;text-transform:uppercase;color:#5ef8ff;text-shadow:0 0 16px rgba(80,230,255,.45);font-weight:800}
  .round-recap__title{margin:0;font-size:clamp(26px,6vw,36px);font-weight:900;letter-spacing:.04em;text-transform:uppercase;color:#f8fbff;text-shadow:0 14px 38px rgba(4,12,26,.75)}
  .round-recap__subtitle{margin:0;font-size:15px;color:#9ddcff;text-shadow:0 0 20px rgba(104,206,255,.4)}
  .round-recap__subtitle:empty{display:none}
  .round-recap__subtitle strong{color:#fef2c0}
  .round-recap__close{margin:2px 0 0 auto;width:40px;height:40px;border-radius:14px;border:1px solid rgba(94,247,255,.28);background:linear-gradient(140deg,rgba(6,24,44,.9) 0%,rgba(12,48,84,.65) 80%);color:#87eaff;display:flex;align-items:center;justify-content:center;font-size:22px;cursor:pointer;transition:transform .18s ease,box-shadow .18s ease,border-color .18s ease,color .18s ease}
  .round-recap__close:hover,.round-recap__close:focus-visible{transform:translateY(-1px);box-shadow:0 0 18px rgba(94,247,255,.45);border-color:rgba(134,232,255,.65);color:#c8f6ff;outline:none}
  .round-recap__body{padding:24px 32px 18px;display:grid;gap:20px;position:relative}
  .round-recap__body::before{content:"";position:absolute;inset:auto 20% 0 20%;height:1px;background:linear-gradient(90deg,rgba(73,194,255,.18) 0%,rgba(255,141,70,.4) 50%,rgba(73,194,255,.18) 100%);opacity:.6;pointer-events:none}
  .round-recap__summary{font-size:18px;line-height:1.55;font-weight:600;color:#d8f3ff;text-shadow:0 0 22px rgba(76,220,255,.35)}
  .round-recap__stats{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(180px,1fr))}
  .round-recap__stat{position:relative;padding:16px 18px;border-radius:18px;background:linear-gradient(155deg,rgba(10,32,56,.88) 0%,rgba(5,15,32,.92) 100%);border:1px solid rgba(73,194,255,.35);box-shadow:0 0 0 1px rgba(36,110,168,.35) inset,0 20px 40px rgba(3,12,26,.65);overflow:hidden}
  .round-recap__stat::before{content:"";position:absolute;inset:-25% -35% 50% -35%;background:radial-gradient(60% 60% at 50% 30%,rgba(80,236,255,.22) 0%,transparent 70%);opacity:.7;pointer-events:none}
  .round-recap__label{font-size:11px;letter-spacing:.36em;text-transform:uppercase;color:#76c5ff;margin-bottom:8px;display:block}
  .round-recap__value{font-size:22px;font-weight:800;color:#f9fcff;text-transform:uppercase;letter-spacing:.06em;text-shadow:0 12px 28px rgba(2,8,18,.75)}
  .round-recap__note{font-size:13px;color:#9cc4ff;margin-top:8px}
  .round-recap__footer{padding:0 32px 28px;display:flex;justify-content:flex-end;align-items:center;flex-wrap:wrap;gap:14px}
  .round-recap__footer-note{color:#94c2ff;font-size:13px;text-transform:uppercase;letter-spacing:.24em;margin-right:auto;min-height:20px}
  .round-recap__dismiss{padding:12px 22px;border-radius:999px;border:1px solid rgba(255,140,76,.55);background:linear-gradient(135deg,rgba(255,120,54,.95) 0%,rgba(255,162,102,.85) 45%,rgba(255,205,150,.75) 100%);color:#1b0c06;font-size:13px;font-weight:800;text-transform:uppercase;letter-spacing:.22em;cursor:pointer;transition:transform .18s ease,box-shadow .2s ease,filter .2s ease}
  .round-recap__dismiss:hover,.round-recap__dismiss:focus-visible{transform:translateY(-1px);box-shadow:0 12px 24px rgba(255,136,68,.45);filter:saturate(1.2);outline:none}
  .round-recap__dismiss:active{transform:translateY(1px)}
  @media (max-width:520px){
    #roundRecapPanel{padding:18px}
    .round-recap__header{padding:24px 22px 18px}
    .round-recap__header::after{inset:auto 22px 10px 22px}
    .round-recap__body{padding:20px 22px 16px}
    .round-recap__body::before{inset:auto 15% 0 15%}
    .round-recap__stats{grid-template-columns:1fr 1fr}
    .round-recap__footer{padding:0 22px 24px}
  }
  @media (max-width:420px){
    .round-recap__stats{grid-template-columns:1fr}
    .round-recap__dismiss{width:100%;text-align:center}
  }

  .nextReadyPanel{position:-webkit-sticky;position:sticky;top:18px;z-index:60;margin:0 auto 12px;padding:20px 22px;border-radius:26px;background:linear-gradient(135deg,rgba(46,200,255,.25) 0%,rgba(14,120,178,.22) 32%,rgba(5,18,32,.88) 100%);border:1px solid rgba(94,233,255,.45);box-shadow:0 24px 70px rgba(6,30,54,.55),0 0 28px rgba(60,220,255,.32);backdrop-filter:blur(18px);-webkit-backdrop-filter:blur(18px);display:flex;flex-direction:column;gap:12px;transform:translate3d(0,24px,0);opacity:0;visibility:hidden;pointer-events:none;transition:opacity .35s ease,transform .5s cubic-bezier(.22,1,.36,1),box-shadow .4s ease;max-width:min(520px,100%);color:#e6f9ff;position:relative;}
  .nextReadyPanel::before{content:"";position:absolute;inset:-12% -16%;background:radial-gradient(circle at 20% 20%,rgba(144,255,255,.35) 0%,transparent 55%);opacity:.75;pointer-events:none;z-index:-1;}
  .nextReadyPanel::after{content:"";position:absolute;inset:1px;border-radius:24px;border:1px solid rgba(143,237,255,.22);mix-blend-mode:screen;pointer-events:none;}
  .nextReadyPanel.show{opacity:1;visibility:visible;pointer-events:auto;transform:translate3d(0,0,0);animation:nextReadyEntrance .7s cubic-bezier(.22,1,.36,1) both;box-shadow:0 32px 80px rgba(7,34,60,.6),0 0 42px rgba(72,236,255,.42);}
  @keyframes nextReadyEntrance{0%{opacity:0;transform:translate3d(0,36px,0) scale(.96);}60%{opacity:1;transform:translate3d(0,-6px,0) scale(1.01);}100%{opacity:1;transform:translate3d(0,0,0) scale(1);}}
  .nextReadyPanel__header{display:flex;flex-direction:column;gap:4px;}
  .nextReadyPanel__headline{font-size:13px;letter-spacing:.3em;text-transform:uppercase;color:#9ff3ff;font-weight:800;text-shadow:0 0 18px rgba(84,226,255,.45);}
  .nextReadyPanel__status{font-size:14px;font-weight:600;color:#d0f6ff;opacity:.92;}
  .nextReadyPanel__instruction{margin:0;font-size:15px;line-height:1.6;color:#e6f9ff;opacity:.95;}
  .nextReadyPanel__cta{position:relative;display:flex;align-items:center;gap:16px;}
  .nextReadyPanel__pulse{position:relative;width:42px;height:42px;border-radius:50%;display:grid;place-items:center;background:rgba(34,194,255,.16);box-shadow:0 0 0 1px rgba(120,246,255,.25) inset,0 0 24px rgba(54,210,255,.45);animation:nextReadyPulse 2.4s ease-in-out infinite;}
  .nextReadyPanel__pulse::before{content:"";position:absolute;inset:6px;border-radius:50%;background:radial-gradient(circle,rgba(144,244,255,.75) 0%,rgba(14,120,178,.55) 55%,rgba(0,0,0,0) 100%);opacity:.85;}
  .nextReadyPanel__pulse::after{content:"";position:absolute;width:8px;height:8px;border-radius:50%;background:#9ff3ff;box-shadow:0 0 16px rgba(120,246,255,.8);}
  @keyframes nextReadyPulse{0%{transform:scale(.92);box-shadow:0 0 0 1px rgba(120,246,255,.15) inset,0 0 12px rgba(54,210,255,.35);}55%{transform:scale(1.05);box-shadow:0 0 0 2px rgba(120,246,255,.35) inset,0 0 34px rgba(54,210,255,.55);}100%{transform:scale(.92);box-shadow:0 0 0 1px rgba(120,246,255,.15) inset,0 0 12px rgba(54,210,255,.35);}}
  .nextReadyPanel__action{position:relative;display:flex;align-items:center;}
  .nextReadyPanel__action button{position:relative;z-index:2;}
  .nextReadyPanel__connector{position:absolute;left:50%;bottom:-26px;width:2px;height:22px;background:linear-gradient(180deg,rgba(118,234,255,.65) 0%,rgba(64,154,206,.35) 100%);box-shadow:0 0 12px rgba(90,220,255,.5);transform:translate(-50%,0);pointer-events:none;}
  .nextReadyPanel__connector::after{content:"";position:absolute;left:50%;bottom:-8px;width:14px;height:14px;border-radius:2px;transform:translate(-50%,-2px) rotate(45deg);background:linear-gradient(135deg,rgba(120,246,255,.9) 0%,rgba(42,130,176,.75) 100%);box-shadow:0 0 16px rgba(86,236,255,.55);}
  .nextReadyPanel__countdown{display:none;margin-top:10px;align-self:flex-start;padding:5px 14px;border-radius:999px;background:rgba(12,30,42,.75);border:1px solid rgba(102,232,255,.45);color:#e3f9ff;font-size:12px;letter-spacing:.18em;text-transform:uppercase;}
  .btn-ready-highlight{background:linear-gradient(120deg,#3ddfff 0%,#1c9bff 60%,#0d3a78 100%)!important;color:#001c2d;border-color:rgba(80,220,255,.9)!important;box-shadow:0 0 0 0 rgba(80,220,255,.45);animation:btnReadyPulse 1.8s ease-in-out infinite;}
  .btn-ready-highlight::after{content:"";position:absolute;inset:-6px;border-radius:18px;border:1px solid rgba(120,246,255,.5);box-shadow:0 0 24px rgba(90,220,255,.65);pointer-events:none;opacity:.75;animation:btnReadyHalo 2.2s ease-in-out infinite;}
  @keyframes btnReadyPulse{0%{box-shadow:0 0 0 0 rgba(80,220,255,.45);}70%{box-shadow:0 0 0 14px rgba(80,220,255,0);}100%{box-shadow:0 0 0 0 rgba(80,220,255,0);}}
  @keyframes btnReadyHalo{0%,100%{opacity:.75;transform:scale(.98);}50%{opacity:1;transform:scale(1.03);}}
  #toggleReadyBtn.ready{background:#1f2632;color:#e5e7eb;border-color:#1f2632}
  @media (max-width:640px){
    .nextReadyPanel{position:fixed;left:16px;right:16px;bottom:calc(24px + env(safe-area-inset-bottom));top:auto;transform:translate3d(0,40px,0);width:auto;max-width:520px;margin:0 auto;}
    .nextReadyPanel.show{transform:translate3d(0,0,0);}
  }
  @media (max-width:420px){
    .nextReadyPanel{padding:18px 18px 20px;border-radius:22px;}
    .nextReadyPanel::after{border-radius:20px;}
    .nextReadyPanel__instruction{font-size:14px;}
  }


  /* Heartbeat pulse */
  @keyframes hbBeat { 0%{transform:scale(1)} 40%{transform:scale(1.03)} 100%{transform:scale(1)} }
  .hold.hb-beat { animation: hbBeat 180ms ease-out; box-shadow: 0 0 0 0 rgba(16,185,129,.35); }
  @keyframes holdNoWinnerPulse{0%,100%{opacity:.68;transform:scale(1);}50%{opacity:.22;transform:scale(1.1);}}

</style>
</head>
<body>

<div class="wrap">
    <div class="joinHeader" id="joinHeader">
      <div class="joinHeaderInner">
        <span class="headerBadge">Player Deployment</span>
        <div class="gameTitle">Time Auction</div>
        <div class="gameSubtitle">Press · Hold · Outlast the field</div>
        <div class="joinHeaderDivider"></div>
        <div class="joinHeaderMeta">
          <span>Real-time bidding</span>
          <span>Shared time banks</span>
          <span>Earn victory tokens</span>
        </div>
      </div>
    </div>

    <div class="card pad" id="joinCard">
      <h1>Join or Resume</h1>
      <div class="muted">Enter a name to join for the first time, or resume with your saved PIN.</div>
      <div id="savedSession" class="muted" style="display:none;margin-top:8px"></div>
      <div class="row" style="margin-top:10px">
        <input id="name" type="text" maxlength="24" placeholder="Your name"/>
        <button id="join" class="btn primary">Join</button>
      </div>
      <div id="nameHelper" class="muted" style="margin-top:6px">We’ll generate your PIN right after launch.</div>
      <button id="showResume" class="text-link" type="button" style="margin-top:8px;display:none">Have a PIN?</button>
      <div id="resumeGroup" style="display:none;margin-top:10px">
        <div class="row">
          <input id="pin" type="text" maxlength="6" placeholder="Your PIN (4–5 digits)"/>
          <button id="reconnect" class="btn">Resume</button>
        </div>
      </div>
      <div id="statusMsg" class="muted" style="margin-top:12px;display:none"></div>
    </div>

    <section class="joinRules" id="joinRulesPanel" aria-labelledby="joinRulesTitle">
      <div class="joinRulesHeader">
        <h2 class="joinRulesTitle" id="joinRulesTitle">How to Play</h2>
        <div class="joinRulesAccent"></div>
      </div>
      <ul class="rulesList">
        <li><strong>Press & Hold:</strong> Stay on the bid button to spend from your personal time bank and stay in the round.</li>
        <li><strong>Release Strategically:</strong> Let go when the pressure is too high—releasing early saves time for later rounds.</li>
        <li><strong>Win Tokens:</strong> The last player holding each round earns a victory token; rack them up to claim the final crown.</li>
      </ul>
    </section>

    <div class="card pad" id="gameCard" style="display:none">
      <div class="playerHud" id="playerHud">
        <div class="playerHud__panel playerHud__panel--identity">
          <div id="playerName" class="playerHud__value">—</div>
          <div class="playerHud__sub">PIN: <span id="myPin" class="mono"></span></div>
        </div>
        <div class="playerHud__panel playerHud__panel--status">
          <div id="phaseBar" role="status" aria-live="polite">
            <span id="phaseBadge" class="phaseBadge ph-idle">Idle</span>
            <span id="phaseCopy" class="phaseCopy">Waiting for host…</span>
          </div>
        </div>
        <div class="playerHud__panel playerHud__panel--tokens">
          <div class="playerHud__label">Victories</div>
          <div id="tokenCount" class="playerHud__value"><span class="tokenIcon" aria-hidden="true">🏆</span> <span id="tokenCountValue">0</span></div>
        </div>
      </div>

      <div class="gameMeta" id="gameMeta" aria-live="polite">
        <div class="metaItem">
          <div class="metaLabel">Match progress</div>
          <div id="roundStatus" class="metaValue">Waiting for host</div>
          <div id="roundStatusDetail" class="metaSub" style="display:none"></div>
        </div>
        <div class="metaItem">
          <div class="metaLabel">Starting time bank</div>
          <div id="timeBankValue" class="metaValue">—</div>
          <div id="timeBankDetail" class="metaSub" style="display:none">Per player at start</div>
        </div>
      </div>

      <!-- Round timer (Active phase) -->
      <div id="roundTimerPanel" class="roundTimerPanel is-idle" role="timer" aria-live="polite">
        <div class="roundTimerLabel">Round Timer</div>
        <div class="roundTimerValue mono" id="roundTimer">00:00.000</div>
      </div>

      <div id="nextReadyPanel" class="nextReadyPanel" aria-live="polite" aria-hidden="true">
        <div class="nextReadyPanel__header">
          <div class="nextReadyPanel__headline">Next round briefing</div>
          <div id="nextReadyStatus" class="nextReadyPanel__status">Ready 0 / 0</div>
        </div>
        <p class="nextReadyPanel__instruction">Ready up so the next round can begin.</p>
        <div class="nextReadyPanel__cta">
          <span class="nextReadyPanel__pulse" aria-hidden="true"></span>
          <div class="nextReadyPanel__action">
            <button id="toggleReadyBtn" class="btn primary">I'm ready</button>
            <span class="nextReadyPanel__connector" aria-hidden="true"></span>
          </div>
        </div>
        <span id="nextReadyCountdownPlayer" class="nextReadyPanel__countdown"></span>
      </div>

      <div id="holdArea" class="hold hold--idlePhase hold--ready" role="button" aria-pressed="false" aria-disabled="false" aria-label="Press and hold">
        <div class="hold__outer" aria-hidden="true">
          <div class="hold__outer-metal"></div>
          <div class="hold__outer-glow"></div>
        </div>
        <div class="hold__inner" aria-hidden="true">
          <div class="hold__plate">
            <span class="hold__plate-highlight"></span>
            <span class="hold__seam hold__seam--north"></span>
            <span class="hold__seam hold__seam--south"></span>
          </div>
          <div class="hold__emissive"></div>
        </div>
        <div class="hold__label">
          <div id="holdText" class="holdText">Press & Hold</div>
          <div id="holdSub" class="holdSub">Release = out (this round)</div>
        </div>
      </div>

      <div id="exhaustedMsg" class="toast" style="display:none">Your time bank is exhausted. You are spectating.</div>
      <div id="roundResult" class="muted round-result"></div>

      <div id="publicScoreCard" class="card pad">
        <h3>Scoreboard</h3>
        <div id="publicScoreTable"></div>
      </div>
    </div>
  </div>

  <div id="countdownOverlay" class="center"><div id="countdownDigit">5</div></div>

  <!-- Final Modal -->
  <div id="finalModal" role="dialog" aria-modal="true" aria-labelledby="finalResultsTitle">
    <div class="final-modal__ambient" aria-hidden="true">
      <div class="final-modal__spot final-modal__spot--one"></div>
      <div class="final-modal__spot final-modal__spot--two"></div>
      <div class="final-modal__spot final-modal__spot--three"></div>
      <div class="final-modal__sweep"></div>
    </div>
    <div id="finalCard">
      <div class="final-modal__header">
        <h2 id="finalResultsTitle">Final Results</h2>
        <p id="finalChampion" class="final-modal__champion">Champion: —</p>
      </div>
      <div id="finalTable">
        <div id="finalTableInner"></div>
      </div>
      <div class="final-modal__actions">
        <button id="closeFinal" class="btn" type="button">Close</button>
      </div>
    </div>
  </div>

  <div id="roundRecapPanel" aria-live="polite" aria-atomic="false">
    <div class="round-recap" role="dialog" aria-modal="true" aria-labelledby="roundRecapLabel roundRecapTitle" aria-describedby="roundRecapSummary">
      <div class="round-recap__header">
        <div class="round-recap__header-text">
          <div id="roundRecapLabel" class="round-recap__eyebrow">Round Winner</div>
          <div id="roundRecapTitle" class="round-recap__title">Round recap</div>
          <p id="roundRecapSubtitle" class="round-recap__subtitle"></p>
        </div>
        <button id="roundRecapClose" class="round-recap__close" type="button" aria-label="Dismiss round winner recap"><span aria-hidden="true">×</span></button>
      </div>
      <div id="roundRecapLive" class="round-recap__body" aria-live="polite" aria-atomic="false">
        <div id="roundRecapSummary" class="round-recap__summary"></div>
        <div class="round-recap__stats">
          <div class="round-recap__stat">
            <div class="round-recap__label">Leader</div>
            <div id="roundRecapLeader" class="round-recap__value">—</div>
            <div id="roundRecapLeaderNote" class="round-recap__note"></div>
          </div>
          <div class="round-recap__stat">
            <div class="round-recap__label">Your gap</div>
            <div id="roundRecapGap" class="round-recap__value">—</div>
            <div id="roundRecapGapNote" class="round-recap__note"></div>
          </div>
          <div class="round-recap__stat" id="roundRecapBonusStat">
            <div class="round-recap__label">Bonus</div>
            <div id="roundRecapBonus" class="round-recap__value">—</div>
            <div id="roundRecapBonusNote" class="round-recap__note"></div>
          </div>
          <div class="round-recap__stat">
            <div class="round-recap__label">Rounds left</div>
            <div id="roundRecapRoundsLeft" class="round-recap__value">—</div>
            <div id="roundRecapRoundsLeftNote" class="round-recap__note"></div>
          </div>
        </div>
      </div>
      <div class="round-recap__footer">
        <span id="roundRecapFooterNote" class="round-recap__footer-note"></span>
        <button id="roundRecapDismiss" class="round-recap__dismiss" type="button">Dismiss recap</button>
      </div>
    </div>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="/public/player.js"></script>
</body></html>
